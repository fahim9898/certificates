import{r as h,b as a,j as e,q as g,F as v}from"./vendor.61ffbfff.js";import{g as l,a as T,p as w,u as _,T as t,b as u,B as S,q as H}from"./index.720694af.js";import{C as I}from"./Card.a57d113a.js";import{M as B}from"./Modal.d8f45e11.js";import"./InputLable.103d759b.js";const j=({modalObj:d,editValue:r,setEditValue:i})=>(h.exports.useState({name:"",phone:""}),a(B,{...d,submitButton:"Print",modalWidth:"700px",children:[a("div",{className:"modal-body two-col-grid",children:[a("fieldset",{className:"form-group",children:[e("label",{children:"Customer Name"}),e("input",{type:"text",value:r.x_name,onChange:s=>i({...r,x_name:s.target.value}),className:"form-control",placeholder:"Customer Name",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Customer Phone"}),e("input",{type:"number",value:r.x_phone,onChange:s=>i({...r,x_phone:s.target.value}),className:"form-control",placeholder:"Customer Phone",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Item Name"}),e("input",{type:"text",disabled:!0,value:r.stock_item?.particular,className:"form-control",placeholder:"Item Name",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Qty"}),e("input",{type:"number",disabled:!0,value:r.qty,className:"form-control",placeholder:"Qty",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Rate"}),e("input",{type:"number",disabled:!0,value:r.rate,className:"form-control",placeholder:"Rate",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Amount"}),e("input",{type:"number",disabled:!0,value:r.amount,className:"form-control",placeholder:"Amount",required:!0})]})]}),e("div",{id:"print-sale",className:"row d-none",children:a("div",{className:"card-body p-2",children:[e("div",{className:"card-header px-0",children:a("div",{className:"row",children:[a("div",{className:"col-md-12 col-lg-7 col-xl-4 mb-50",children:[a("span",{className:"invoice-id font-weight-bold",children:["# Invoice: ",l(()=>r.branch.branch_name)," ",l(()=>r.id)]}),e("span",{})]}),e("div",{className:"col-md-12 col-lg-5 col-xl-8",children:e("div",{className:"d-flex align-items-center justify-content-end justify-content-xs-start",children:a("div",{className:"issue-date pr-2",children:[a("span",{className:"font-weight-bold no-wrap",children:["Issue Date:"," "]}),e("span",{children:new Date().toISOString().split("T")[0]}),"\xA0\xA0",a("span",{className:"font-weight-bold no-wrap",children:["Bill Date:"," "]}),e("span",{children:l(()=>new Date(r.created_at).toISOString().split("T")[0])})]})})})]})}),a("div",{className:"invoice-logo-title row pt-2",children:[e("div",{className:"col-6 d-flex flex-column justify-content-center align-items-start",children:e("h2",{className:"text-primary",children:"Gym Invoice"})}),e("div",{className:"col-6 d-flex justify-content-end invoice-logo",children:e("img",{src:T(l(()=>r.branch_logo)),style:{maxHeight:"50px",objectFit:"cover",marginRight:"20px"}})})]}),e("hr",{}),a("div",{className:"row invoice-adress-info py-2",children:[a("div",{className:"col-6 mt-1 from-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill From"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:l(()=>r.sale_transaction.sold_by.name)})}),e("div",{className:"company-email  mb-1 mb-1",children:e("span",{className:"text-muted",children:l(()=>r.sale_transaction.sold_by.email)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:l(()=>r.sale_transaction.sold_by.phone)})})]}),a("div",{className:"col-6 mt-1 to-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill To"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:l(()=>r.x_name)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:l(()=>r.x_phone)})})]})]}),e("div",{className:"product-details-table py-2 table-responsive",children:a("table",{className:"table table-borderless",children:[e("thead",{children:a("tr",{children:[e("th",{scope:"col",children:"ITEM"}),e("th",{scope:"col",children:"COST"}),e("th",{scope:"col",children:"QTY"}),e("th",{scope:"col",children:"PRICE"})]})}),e("tbody",{children:a("tr",{children:[e("td",{children:l(()=>r.stock_item.particular)}),e("td",{children:l(()=>r.amount)}),e("td",{children:l(()=>r.qty)}),e("td",{className:"font-weight-bold",children:l(()=>(r.amount*r.qty).toFixed(2)+" \u20B9")})]})}),e("tfoot",{style:{borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:a("tr",{children:[e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),a("td",{style:{borderBottom:"0px"},className:"font-weight-bold",children:["Total:"," ",l(()=>(r.amount*r.qty).toLocaleString("en-IN")+" \u20B9")]})]})})]})}),e("div",{className:"invoice-total pb-2",children:a("div",{className:"row",children:[e("div",{className:"col-8 col-sm-6 d-flex justify-content-end mt-75",children:e("ul",{className:"list-group cost-list d-none ",children:a("li",{className:"list-group-item each-cost border-0 p-50 d-flex justify-content-between",children:[e("span",{className:"cost-title mr-2",children:"Total "}),e("span",{className:"cost-value",children:l(()=>(r.amount*r.qty).toFixed(2)+" \u20B9")})]})})}),e("div",{className:"col-4 col-sm-6 mt-0",children:e("p",{className:"text-right",children:"Thanks for your business."})})]})})]})})]})),E=()=>{let d=g(),r=w+(d.id?"/"+d.id:"");const{data:i,setData:s,loadingDone:b}=_({method:"get",url:r},n=>d.id?[n.data?.branches]:n.data?.branches);h.exports.useEffect(()=>(t.search.clear(),t.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",8),()=>{t.search.clear()}),[]);const[m,q]=h.exports.useState({formId:"print-form-edit",modalId:"print-modal-edit",title:"Print Bill"}),[f,p]=h.exports.useState({particular:"",qty:"",rate:"",amount:""}),{isLoading:N,callback:C}=u();u();function x(n){p({...n,x_name:"",x_phone:"",branch:i?.branch}),window.$(`#${m.modalId}`).modal("show"),window.$(`#${m.formId}`).off("submit")}function y(){H("print-sale"),window.$(`#${m.modalId}`).modal("hide")}return a(v,{children:[e(S,{title:"Sales",links:[{name:"Home",link:"/gym-admin"},{name:"Sales",link:"/gym-admin/sales"}]}),e(I,{title:"Sales",children:a(t,{tableId:".table-brand-staff",loadingDone:b,footerSelect:!0,filter:!0,footer:[{index:5,text:"\u20B9"},{index:4,text:"\u20B9"},{index:3,text:""}],children:[e(t.Header,{children:a(t.Row,{children:[e(t.TH,{children:"Id"}),e(t.TH,{children:"Branch"}),e(t.TH,{children:"Name"}),e(t.TH,{children:"Qty"}),e(t.TH,{children:"Selling Price"}),e(t.TH,{children:"Amount"}),e(t.TH,{children:"Note"}),e(t.TH,{children:"Sold By"}),e(t.TH,{children:"Date"}),e(t.TH,{children:"Actions"})]})}),e(t.Body,{children:i&&i.map(n=>n.sale.map((c,o)=>a(t.Row,{children:[e(t.TH,{children:l(()=>c.id)}),e(t.TH,{children:l(()=>n.branch_name)}),e(t.TH,{children:l(()=>c.stock_item.particular)}),e(t.TH,{children:l(()=>c.qty)}),e(t.TH,{children:l(()=>c.amount)}),e(t.TH,{children:l(()=>c.amount*c.qty)}),e(t.TH,{children:l(()=>c.sale_transaction.note)}),e(t.TH,{children:l(()=>c.sale_transaction.sold_by.name)}),e(t.TH,{children:l(()=>new Date(c.created_at).toLocaleDateString())}),e(t.TH,{children:a("span",{className:"cursor-pointer badge badge-info",onClick:()=>x({...n,...c}),children:[e("i",{className:"feather icon-printer"})," Print"]})})]},c.id)))}),e(t.Footer,{children:a("tr",{children:[e("td",{colSpan:3,className:"text-right",children:"Total"}),e("th",{children:l(()=>i.reduce((n,c)=>(c.sale.map(o=>{n=Number(o.qty)+n}),n),0))}),e("th",{children:l(()=>i.reduce((n,c)=>(c.sale.map(o=>{n=Number(o.amount)+n}),n),0))}),e("th",{children:l(()=>i.reduce((n,c)=>(c.sale.map(o=>{n=Number(o.amount)*Number(o.qty)+n}),n),0))}),e("td",{colSpan:4})]})})]})}),e(j,{editValue:f,setEditValue:p,modalObj:{...m,onSubmit:y,isLoading:N}})]})};export{E as default};
