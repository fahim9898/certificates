var C=Object.defineProperty,M=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var T=(t,d,n)=>d in t?C(t,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[d]=n,o=(t,d)=>{for(var n in d||(d={}))A.call(d,n)&&T(t,n,d[n]);if(N)for(var n of N(d))$.call(d,n)&&T(t,n,d[n]);return t},m=(t,d)=>M(t,j(d));import{j as e,b as r,r as b,F as k}from"./vendor.abe5e19c.js";import{b as x,u as D,T as a,B as L,g as h,L as E,N as S}from"./index.e8bf6671.js";import{C as _}from"./Card.0a56d7c5.js";import{M as v}from"./Modal.395016a9.js";import"./InputLable.a582803e.js";const Q=({modalObj:t,editValue:d,setEditValue:n})=>e(v,m(o({},t),{modalWidth:"700px",children:r("div",{className:"modal-body one-col-grid",children:[r("fieldset",{className:"form-group",children:[e("label",{children:"Equipment Name"}),e("input",{type:"text",value:d.particular,onChange:l=>n(m(o({},d),{particular:l.target.value})),className:"form-control",placeholder:"Equipment Name",required:!0})]}),r("fieldset",{className:"form-group",children:[e("label",{children:"Qty"}),e("input",{type:"number",value:d.qty,onChange:l=>n(m(o({},d),{qty:l.target.value})),className:"form-control",placeholder:"Qty",required:!0})]})]})})),G=()=>{const[t,d]=b.exports.useState({formId:"equipments-form-edit",modalId:"equipments-modal-edit",title:"Edit Equipments"}),{isLoading:n,callback:l}=x();x();const{data:u,setData:f,loadingDone:w}=D({method:"get",url:E},"equipments"),[c,q]=b.exports.useState({particular:"",qty:""});function g(){let i=new FormData;for(var s in c)i.append(s,c[s]);i.append("_method","patch"),l({method:"post",url:E+"/"+c.id,data:i,headers:{"Content-Type":"multipart/form-data"},success:p=>{window.Notify({status:"success",message:p.data.message}),window.$(`#${t.modalId}`).modal("hide");let H=o({},c);a.fn.updateTableWithId(u,H,f,"id")},error:p=>{window.$(`#${t.modalId}`).modal("hide")}})}function y(i){q(i),window.$(`#${t.modalId}`).modal("show"),window.$(`#${t.formId}`).off("submit")}function I(i){l({method:"post",url:S,data:{branch_equipment_id:i.id},success:s=>{window.Notify({status:"success",message:s.data.message});let p=o(o({},i),s.data.equipments_to_maintain);a.fn.updateTableWithId(u,p,f,"id")},error:s=>{window.$(`#${t.modalId}`).modal("hide")}})}return b.exports.useEffect(()=>(a.search.clear(),a.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",3),()=>{a.search.clear()}),[]),r(k,{children:[e(L,{title:"Equipmets",links:[{name:"Home",link:"/branch-admin"},{name:"Equipmets",link:"/branch-admin/equipments"}]}),e(_,{title:"Equipmets",button:{name:"Add",link:"equipment-add"},children:r(a,{tableId:".table-brand-staff",loadingDone:w,footerSelect:!0,filter:!0,footer:[{index:2,text:""}],children:[e(a.Header,{children:r(a.Row,{children:[e(a.TH,{children:"Id"}),e(a.TH,{children:"Equipment"}),e(a.TH,{children:"Qty"}),e(a.TH,{children:"Date"}),e(a.TH,{children:"Actions"})]})}),e(a.Body,{children:u&&u.map((i,s)=>r(a.Row,{children:[e(a.TH,{children:h(()=>i.id)}),e(a.TH,{children:h(()=>i.particular)}),e(a.TH,{children:h(()=>i.qty)}),e(a.TH,{children:h(()=>new Date(i.created_at).toLocaleDateString())}),r(a.TH,{children:[e("i",{className:"feather icon-edit cursor-pointer",onClick:()=>y(i)}),r("span",{className:"cursor-pointer badge badge-secondary",style:{marginLeft:"10px"},onClick:()=>I(i),children:[e("i",{className:"fa fa-plus"})," \xA0 Maintenance"]})]})]},i.id))}),e(a.Footer,{children:r("tr",{children:[e("td",{colSpan:2,className:"text-right",children:"Total Qty"}),e("td",{}),e("td",{}),e("td",{})]})})]})}),e(Q,{editValue:c,setEditValue:q,modalObj:m(o({},t),{onSubmit:g,isLoading:n})})]})};export{G as default};
