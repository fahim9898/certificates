var I=Object.defineProperty,C=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var x=(r,a,o)=>a in r?I(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o,c=(r,a)=>{for(var o in a||(a={}))v.call(a,o)&&x(r,o,a[o]);if(T)for(var o of T(a))q.call(a,o)&&x(r,o,a[o]);return r},i=(r,a)=>C(r,j(a));import{j as e,b as l,r as p,F as D}from"./vendor.abe5e19c.js";import{b as k,u as A,T as t,B as $,g as s,J as H}from"./index.945cac23.js";import{C as L}from"./Card.0a56d7c5.js";import{M}from"./Modal.395016a9.js";import"./InputLable.a582803e.js";const B=({modalObj:r,editValue:a,setEditValue:o})=>e(M,i(c({},r),{modalWidth:"700px",children:l("div",{className:"modal-body two-col-grid",children:[l("fieldset",{className:"form-group",children:[e("label",{children:"Item Name"}),e("input",{type:"text",value:a.particular,onChange:n=>o(i(c({},a),{particular:n.target.value})),className:"form-control",placeholder:"Item Name",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Qty"}),e("input",{type:"number",value:a.qty,onChange:n=>o(i(c({},a),{qty:n.target.value})),className:"form-control",placeholder:"Qty",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Rate"}),e("input",{type:"number",value:a.rate,onChange:n=>o(i(c({},a),{rate:n.target.value})),className:"form-control",placeholder:"Rate",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Amount"}),e("input",{type:"number",value:a.amount,onChange:n=>o(i(c({},a),{amount:n.target.value})),className:"form-control",placeholder:"Amount",required:!0})]})]})})),G=()=>{const[r,a]=p.exports.useState({formId:"stock-form-edit",modalId:"stock-modal-edit",title:"Edit Stocks"}),{isLoading:o,callback:n}=k();k();const{data:h,setData:S,loadingDone:g}=A({method:"get",url:H},"stocks"),[m,b]=p.exports.useState({particular:"",qty:"",rate:"",amount:""});function y(){let d=new FormData;for(var u in m)d.append(u,m[u]);d.append("_method","patch"),n({method:"post",url:H+"/"+m.id,data:d,headers:{"Content-Type":"multipart/form-data"},success:f=>{window.Notify({status:"success",message:f.data.message}),window.$(`#${r.modalId}`).modal("hide");let N=c({},m);t.fn.updateTableWithId(h,N,S,"id")},error:f=>{window.$(`#${r.modalId}`).modal("hide")}})}function w(d){b(d),window.$(`#${r.modalId}`).modal("show"),window.$(`#${r.formId}`).off("submit")}return p.exports.useEffect(()=>(t.search.clear(),t.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",5),()=>{t.search.clear()}),[]),l(D,{children:[e($,{title:"Stocks",links:[{name:"Home",link:"/branch-admin"},{name:"Stocks",link:"/branch-admin/stocks"}]}),e(L,{title:"Stocks",button:{name:"Purchase Stock",link:"stock-purchase"},children:l(t,{tableId:".table-brand-staff",loadingDone:g,footerSelect:!0,filter:!0,footer:[{index:2,text:""},{index:3,text:"\u20B9"},{index:5,text:"\u20B9"}],children:[e(t.Header,{children:l(t.Row,{children:[e(t.TH,{children:"Id"}),e(t.TH,{children:"Item"}),e(t.TH,{children:"Qty"}),e(t.TH,{children:"Cost Price"}),e(t.TH,{children:"Selling Price"}),e(t.TH,{children:"Amount"}),e(t.TH,{children:"Date"}),e(t.TH,{children:"Actions"})]})}),e(t.Body,{children:h&&h.map((d,u)=>l(t.Row,{children:[e(t.TH,{children:s(()=>d.id)}),e(t.TH,{children:s(()=>d.particular)}),e(t.TH,{children:s(()=>d.qty)}),e(t.TH,{children:s(()=>d.rate)}),e(t.TH,{children:s(()=>d.amount)}),e(t.TH,{children:s(()=>d.qty*d.rate)}),e(t.TH,{children:s(()=>new Date(d.created_at).toLocaleDateString())}),e(t.TH,{children:e("i",{className:"feather icon-edit cursor-pointer",onClick:()=>w(d)})})]},d.id))}),e(t.Footer,{children:l("tr",{children:[e("th",{colSpan:2,className:"text-right",children:"Total"}),e("th",{}),e("th",{}),e("th",{}),e("th",{}),e("th",{colSpan:2})]})})]})}),e(B,{editValue:m,setEditValue:b,modalObj:i(c({},r),{onSubmit:y,isLoading:o})})]})};export{G as default};
