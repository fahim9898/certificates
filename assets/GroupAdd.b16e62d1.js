import{d as v,r as u,b as i,F as _,j as a}from"./vendor.abe5e19c.js";import{u as N,b as T,B as x,z as A,D as G}from"./index.6b6b7103.js";import{C as y}from"./Card.0a56d7c5.js";import{F as C,I as o}from"./InputLable.a582803e.js";const j=()=>{const c="Add Group",p=[{name:"Home",link:"/branch-admin"},{name:"Groups",link:"/branch-admin/groups"},{name:"Add Group",link:"/branch-admin/group-add"}];let b=v();const{data:d,setData:S,loadingDone:L}=N({method:"get",url:A},"staff"),{isLoading:f,callback:g}=T(),[t,n]=u.exports.useState({group_trainer_id:"",group_timmings_hours:"",start_time:"",end_time:"",name:""});function m(e,r){let s=e,l=r;if(s==""||l==""||s.split(":")[0]<=l.split(":")[0])return!0;if(s&&l)return window.Notify({status:"error",message:"Please Select Appropriate Start Time and End Time"}),!1}u.exports.useEffect(()=>{let e=t.start_time,r=t.end_time;e&&r&&n({...t,group_timmings_hours:r.split(":")[0]-e.split(":")[0]})},[t.start_time,t.end_time]);const h=function(){let e=new FormData;for(var r in t)e.append(r,t[r]);g({method:"post",url:G,data:t,success:s=>{window.Notify({message:s.data.message,status:"success"}),b.push("/branch-admin/groups")}})};return i(_,{children:[a(x,{title:c,links:p}),a(C,{id:"form-member-plan-validation",onSubmit:e=>{e.preventDefault(),window.formValidate("form-member-plan-validation")(h)},children:i("div",{className:"row",children:[a("div",{className:"col-md-8",children:i(y,{title:"Group Information",iconLeft:"feather icon-box",children:[a(o.LabelInput,{className:"form-control",type:"text",required:!0,value:t.name,onChange:e=>n({...t,name:e.target.value}),label:"Group Name",invalidText:"Group Name is required"}),i(o.LabelSelect,{value:t.group_trainer_id,required:!0,label:"Trainer",onChange:e=>{console.log("called"),JSON.parse(e.target[e.target.selectedIndex].getAttribute("trainer")),n({...t,group_trainer_id:e.target.value})},invalidText:"Need to select Trainer",children:[a("option",{value:"",children:"Select Trainer"}),d&&d.filter(e=>e.is_active).map(e=>(()=>{if(e.staff_type=="Trainer")return a("option",{value:e.id,children:e.staff_name},e.id)})())]}),i("div",{className:"row",children:[a("div",{className:"col-md-6",children:a(o.LabelInput,{className:"form-control",type:"time",required:!0,value:t.start_time,onChange:e=>{m(e.target.value,t.end_time)&&n({...t,start_time:e.target.value})},label:"Start Time",invalidText:"Start Time is required"})}),a("div",{className:"col-md-6",children:a(o.LabelInput,{className:"form-control",type:"time",required:!0,value:t.end_time,onChange:e=>{m(t.start_time,e.target.value)&&n({...t,end_time:e.target.value})},label:"End Time",invalidText:"End Time is required"})})]}),a(o.LabelInput,{className:"form-control",type:"text",required:!0,disabled:!0,value:t.group_timmings_hours,onChange:e=>n({...t,group_timmings_hours:e.target.value}),label:"Group Hours",invalidText:"Group Hours is required"})]})}),a("div",{className:"col-md-4"}),a("div",{className:"col-md-2",children:f?i("div",{className:"mb-4 btn btn-primary btn-lg btn-block",children:[a("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"\xA0 Loading..."]}):i("button",{type:"submit",className:"mb-4 btn btn-primary btn-lg btn-block",children:[a("i",{className:"feather icon-plus"})," Add Group"]})})]})})]})};export{j as default};
