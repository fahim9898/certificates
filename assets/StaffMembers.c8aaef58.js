var F=Object.defineProperty,q=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var A=(d,a,t)=>a in d?F(d,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[a]=t,s=(d,a)=>{for(var t in a||(a={}))W.call(a,t)&&A(d,t,a[t]);if(_)for(var t of _(a))B.call(a,t)&&A(d,t,a[t]);return d},i=(d,a)=>q(d,R(a));import{j as e,b as l,r as u,F as O}from"./vendor.abe5e19c.js";import{b as C,u as P,T as r,B as G,g as c,a as x,z as y,C as K}from"./index.e8bf6671.js";import{C as U}from"./Card.0a56d7c5.js";import{M as I}from"./Modal.395016a9.js";const z=({modalObj:d,editValue:a,setEditValue:t})=>e(I,i(s({},d),{modalWidth:"700px",children:l("div",{className:"modal-body two-col-grid",children:[l("fieldset",{className:"form-group",children:[e("label",{children:"Name"}),e("input",{type:"text",value:a.staff_name,onChange:n=>t(i(s({},a),{staff_name:n.target.value})),className:"form-control",placeholder:"Name",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Type"}),l("select",{className:"form-control drop-icon",value:a.staff_type,onChange:n=>t(i(s({},a),{staff_type:n.target.value})),children:[e("option",{value:"Manager",children:"Manager"}),e("option",{value:"Trainer",children:"Trainer"}),e("option",{value:"Receptionist",children:"Receptionist"}),e("option",{value:"House Keeper",children:"House Keeper"})]})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Gender"}),l("select",{className:"form-control drop-icon",value:a.gender,onChange:n=>t(i(s({},a),{gender:n.target.value})),children:[e("option",{value:"0",children:"Male"}),e("option",{value:"1",children:"Female"})]})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Dob"}),e("input",{type:"date",value:a.dob,onChange:n=>t(i(s({},a),{dob:n.target.value})),className:"form-control",placeholder:"dob",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Aniversary"}),e("input",{type:"date",value:a.aniversary,onChange:n=>t(i(s({},a),{aniversary:n.target.value})),className:"form-control",placeholder:"Aniversary"})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Contact No"}),e("input",{type:"text",value:a.contact_no,onChange:n=>t(i(s({},a),{contact_no:n.target.value})),className:"form-control",placeholder:"Contact No",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Address"}),e("input",{type:"text",value:a.address,onChange:n=>t(i(s({},a),{address:n.target.value})),className:"form-control",placeholder:"Address",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Working Hours"}),e("input",{type:"number",value:a.working_hours,onChange:n=>t(i(s({},a),{working_hours:n.target.value})),className:"form-control",placeholder:"Working Hours",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Salary Amount "}),e("input",{type:"number",value:a.salary_amount,onChange:n=>t(i(s({},a),{salary_amount:n.target.value})),className:"form-control",placeholder:"Salary Amount",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:" Profile Picture"}),e("input",{type:"file",id:"member-profile-file-update",accept:"image/*",className:"form-control"})]})]})})),Y=({modalObj:d,editValue:a,setEditValue:t})=>e(I,i(s({},d),{modalWidth:"700px",children:l("div",{className:"modal-body one-col-grid",children:[l("fieldset",{className:"form-group",children:[e("label",{children:"Amount"}),e("input",{type:"number",value:a.amount,onChange:n=>t(i(s({},a),{amount:n.target.value})),className:"form-control",placeholder:"Amount",required:!0})]}),l("fieldset",{className:"form-group",children:[e("label",{children:"Note"}),e("input",{type:"text",value:a.note,onChange:n=>t(i(s({},a),{note:n.target.value})),className:"form-control",placeholder:"Note",required:!0})]})]})})),re=()=>{const[d,a]=u.exports.useState({formId:"staff-member-form-edit",modalId:"staff-member-modal-edit",title:"Edit Staff Member"}),[t,n]=u.exports.useState({formId:"staff-member-form-add-salary",modalId:"staff-member-modal-add-salary",title:"Add Staff Salary"}),{isLoading:v,callback:N}=C(),{isLoading:E,callback:M}=C(),{data:h,setData:T,loadingDone:$}=P({method:"get",url:y},"staff"),[m,w]=u.exports.useState({staff_name:"",profile_pic:"",staff_type:"",gender:"",dob:"",aniversary:"",contact_no:"",address:"",working_hours:"",salary_amount:""}),[p,H]=u.exports.useState({amount:"",note:""});function S(o,f){M({method:"get",url:y+"/"+o.id+"/edit",success:g=>{window.Notify({status:"success",message:g.data.message}),r.fn.updateTableWithId(h,i(s({},o),{is_active:f}),T,"id")}})}function k(){let o=new FormData;for(var f in m)o.append(f,m[f]);o.delete("profile_pic"),console.log(m.aniversary),(!m.aniversary||m.aniversary=="")&&o.delete("aniversary");let g=document.getElementById("member-profile-file-update");g.files.length&&(console.log("Files Uplod"),o.append("profile_pic",g.files[0])),o.append("_method","patch"),N({method:"post",url:y+"/"+m.id,data:o,headers:{"Content-Type":"multipart/form-data"},success:b=>{window.Notify({status:"success",message:b.data.message}),window.$(`#${d.modalId}`).modal("hide"),r.fn.updateTableWithId(h,b.data.staff,T,"id")},error:b=>{window.$(`#${d.modalId}`).modal("hide")}})}function j(){N({method:"post",url:K,data:{branch_staff_id:p.id,amount:p.amount,note:p.note},success:o=>{window.Notify({status:"success",message:o.data.message}),window.$(`#${t.modalId}`).modal("hide")},error:o=>{window.$(`#${t.modalId}`).modal("hide")}})}function D(o){w(o),window.$(`#${d.modalId}`).modal("show"),window.$(`#${d.formId}`).off("submit"),window.$(`#${d.formId}`).on("submit",function(){a(i(s({},d),{isLoading:!0}))})}function L(o){H(i(s({},o),{amount:"",note:""})),window.$(`#${t.modalId}`).modal("show"),window.$(`#${t.formId}`).off("submit"),window.$(`#${t.formId}`).on("submit",function(){n(i(s({},t),{isLoading:!0}))})}return u.exports.useEffect(()=>(r.search.clear(),r.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",12),()=>{r.search.clear()}),[]),l(O,{children:[e(G,{title:"Staff Members",links:[{name:"Home",link:"/branch-admin"},{name:"Staff Members",link:"/branch-admin/staff-members"}]}),e(U,{title:"Staff Members",button:{name:"Add",link:"staff-member-add"},children:l(r,{tableId:".table-brand-staff-x",loadingDone:$,footerSelect:!0,filter:!0,children:[e(r.Header,{children:l(r.Row,{children:[e(r.TH,{children:"Id"}),e(r.TH,{children:"Name"}),e(r.TH,{children:"Type"}),e(r.TH,{children:"Profile Pic"}),e(r.TH,{children:"Gender"}),e(r.TH,{children:"Dob"}),e(r.TH,{children:"Aniversary"}),e(r.TH,{children:"Contact No"}),e(r.TH,{children:"Address"}),e(r.TH,{children:"Working Hours"}),e(r.TH,{children:"Salary Amount"}),e(r.TH,{children:"Status"}),e(r.TH,{children:"Date"}),e(r.TH,{children:"Actions"})]})}),e(r.Body,{children:h&&h.map((o,f)=>l(r.Row,{children:[e(r.TH,{children:c(()=>o.id)}),e(r.TH,{children:c(()=>o.staff_name)}),e(r.TH,{children:c(()=>o.staff_type)}),e(r.TH,{children:e("a",{href:x(o.profile_pic),"data-fancybox":"images",children:e("img",{className:"table-img",src:x(o.profile_pic),alt:""})})}),e(r.TH,{children:c(()=>o.gender?"Female":"Male")}),e(r.TH,{children:c(()=>o.dob)}),e(r.TH,{children:c(()=>o.aniversary)}),e(r.TH,{children:c(()=>o.contact_no)}),e(r.TH,{children:c(()=>o.address)}),e(r.TH,{children:c(()=>o.working_hours)}),e(r.TH,{children:c(()=>o.salary_amount)}),e(r.TH,{children:o.is_active?e("span",{className:"cursor-pointer badge badge-success",onClick:()=>S(o,!1),children:"Active"}):e("span",{className:"cursor-pointer badge badge-danger",onClick:()=>S(o,!0),children:"In Active"})}),e(r.TH,{children:c(()=>new Date(o.created_at).toLocaleDateString())}),l(r.TH,{children:[e("i",{className:"feather icon-edit cursor-pointer",onClick:()=>D(o)}),l("span",{className:"cursor-pointer badge badge-secondary ml-1",onClick:()=>L(o),children:[e("i",{className:"fa fa-plus"})," Salary"]})]})]},o.id))})]})}),e(z,{editValue:m,setEditValue:w,modalObj:i(s({},d),{onSubmit:k,isLoading:v})}),e(Y,{editValue:p,setEditValue:H,modalObj:i(s({},t),{onSubmit:j,isLoading:v})})]})};export{re as default};
