var w=Object.defineProperty,_=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var N=(l,a,o)=>a in l?w(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o,s=(l,a)=>{for(var o in a||(a={}))B.call(a,o)&&N(l,o,a[o]);if(f)for(var o of f(a))H.call(a,o)&&N(l,o,a[o]);return l},i=(l,a)=>_(l,S(a));import{r as b,b as t,j as e,F as I}from"./vendor.abe5e19c.js";import{g as r,a as j,b as x,u as g,T as n,B as C,F as D,q as A,H as M}from"./index.e8bf6671.js";import{C as L}from"./Card.0a56d7c5.js";import{M as k}from"./Modal.395016a9.js";import"./InputLable.a582803e.js";const q=({modalObj:l,editValue:a,setEditValue:o})=>{var d;return b.exports.useState({name:"",phone:""}),t(k,i(s({},l),{submitButton:"Print",modalWidth:"700px",children:[t("div",{className:"modal-body two-col-grid",children:[t("fieldset",{className:"form-group",children:[e("label",{children:"Customer Name"}),e("input",{type:"text",value:a.x_name,onChange:m=>o(i(s({},a),{x_name:m.target.value})),className:"form-control",placeholder:"Customer Name",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Customer Phone"}),e("input",{type:"number",value:a.x_phone,onChange:m=>o(i(s({},a),{x_phone:m.target.value})),className:"form-control",placeholder:"Customer Phone",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Amount"}),e("input",{type:"number",disabled:!0,value:a.amount,className:"form-control",placeholder:"Amount",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Note"}),e("input",{type:"text",disabled:!0,value:a.note,className:"form-control",placeholder:"note",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Transaction By"}),e("input",{type:"text",disabled:!0,value:(d=a.transaction_by)==null?void 0:d.staff_name,className:"form-control",placeholder:"note",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Transaction Date"}),e("input",{type:"text",disabled:!0,value:new Date(a.created_at).toLocaleDateString(),className:"form-control",placeholder:"note",required:!0})]})]}),e("div",{id:"print-sale",className:"row d-none",children:t("div",{className:"card-body p-2",children:[e("div",{className:"card-header px-0",children:t("div",{className:"row",children:[t("div",{className:"col-md-12 col-lg-7 col-xl-4 mb-50",children:[t("span",{className:"invoice-id font-weight-bold",children:["# Invoice: ",r(()=>a.branch.branch_name)," ",r(()=>a.id)]}),e("span",{})]}),e("div",{className:"col-md-12 col-lg-5 col-xl-8",children:e("div",{className:"d-flex align-items-center justify-content-end justify-content-xs-start",children:t("div",{className:"issue-date pr-2",children:[t("span",{className:"font-weight-bold no-wrap",children:["Issue Date:"," "]}),e("span",{children:new Date().toISOString().split("T")[0]}),"\xA0\xA0",t("span",{className:"font-weight-bold no-wrap",children:["Bill Date:"," "]}),e("span",{children:r(()=>new Date(a.created_at).toISOString().split("T")[0])})]})})})]})}),t("div",{className:"invoice-logo-title row pt-2",children:[e("div",{className:"col-6 d-flex flex-column justify-content-center align-items-start",children:e("h2",{className:"text-primary",children:"Gym Invoice"})}),e("div",{className:"col-6 d-flex justify-content-end invoice-logo",children:e("img",{src:j(r(()=>a.branch.branch_logo)),style:{maxHeight:"50px",objectFit:"cover",marginRight:"20px"}})})]}),e("hr",{}),t("div",{className:"row invoice-adress-info py-2",children:[t("div",{className:"col-6 mt-1 from-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill From"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:r(()=>a.transaction_by.staff_name)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:r(()=>a.transaction_by.contact_no)})})]}),t("div",{className:"col-6 mt-1 to-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill To"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:r(()=>a.x_name)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:r(()=>a.x_phone)})})]})]}),e("div",{className:"product-details-table py-2 table-responsive",children:t("table",{className:"table table-borderless",children:[e("thead",{children:t("tr",{children:[e("th",{scope:"col",children:"Customer"}),e("th",{scope:"col",children:"COST"}),e("th",{scope:"col",children:"NOTE"}),e("th",{scope:"col",children:"PRICE"})]})}),e("tbody",{children:t("tr",{children:[e("td",{children:r(()=>a.member.member_name)}),e("td",{children:r(()=>a.amount)}),e("td",{children:r(()=>a.note)}),e("td",{className:"font-weight-bold",children:r(()=>(a.amount*1).toFixed(2)+" \u20B9")})]})}),e("tfoot",{style:{borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:t("tr",{children:[e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),t("td",{style:{borderBottom:"0px"},className:"font-weight-bold",children:["Total:"," ",r(()=>(a.amount*1).toLocaleString("en-IN")+" \u20B9")]})]})})]})}),e("div",{className:"invoice-total pb-2",children:t("div",{className:"row",children:[e("div",{className:"col-8 col-sm-6 d-flex justify-content-end mt-75",children:e("ul",{className:"list-group cost-list d-none ",children:t("li",{className:"list-group-item each-cost border-0 p-50 d-flex justify-content-between",children:[e("span",{className:"cost-title mr-2",children:"Total "}),e("span",{className:"cost-value",children:r(()=>(a.amount*a.qty).toFixed(2)+" \u20B9")})]})})}),e("div",{className:"col-4 col-sm-6 mt-0",children:e("p",{className:"text-right",children:"Thanks for your business."})})]})})]})})]}))},K=()=>{const[l,a]=b.exports.useState({formId:"print-form-edit",modalId:"print-modal-edit",title:"Print Bill"}),[o,d]=b.exports.useState({particular:"",qty:"",rate:"",amount:""}),{isLoading:m,callback:P}=x();x();const{data:h,setData:E,loadingDone:v}=g({method:"get",url:D},"member_transactions"),{data:p,setData:F}=g({method:"get",url:M});b.exports.useEffect(()=>(n.search.clear(),n.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",5),()=>{n.search.clear()}),[]);function y(){A("print-sale"),window.$(`#${l.modalId}`).modal("hide")}function T(c){console.log(h),d(i(s({},c),{x_name:"",x_phone:"",branch:p==null?void 0:p.branch})),window.$(`#${l.modalId}`).modal("show"),window.$(`#${l.formId}`).off("submit")}return t(I,{children:[e(C,{title:"Members Transactions",links:[{name:"Home",link:"/branch-admin"},{name:"Members Transactions",link:"/branch-admin/members-transactions"}]}),e(L,{title:"Members Transactions",children:t(n,{tableId:".table-brand-staff",loadingDone:v,footerSelect:!0,filter:!0,footer:[{index:3,text:"\u20B9"}],children:[e(n.Header,{children:t(n.Row,{children:[e(n.TH,{children:"Id"}),e(n.TH,{children:"Member Name"}),e(n.TH,{children:"Staff Name"}),e(n.TH,{children:"Amount"}),e(n.TH,{children:"Note"}),e(n.TH,{children:"Date"}),e(n.TH,{children:"Actions"})]})}),e(n.Body,{children:h&&p&&h.map((c,u)=>t(n.Row,{children:[e(n.TH,{children:r(()=>c.id)}),e(n.TH,{children:r(()=>c.member.member_name)}),e(n.TH,{children:r(()=>c.transaction_by.staff_name)}),e(n.TH,{children:r(()=>c.amount)}),e(n.TH,{children:r(()=>c.note)}),e(n.TH,{children:r(()=>new Date(c.created_at).toLocaleDateString())}),e(n.TH,{children:t("span",{className:"cursor-pointer badge badge-info",onClick:()=>T(c),children:[e("i",{className:"feather icon-printer"})," Print"]})})]},c.id))}),e(n.Footer,{children:t("tr",{children:[e("td",{colSpan:3,className:"text-right",children:"Total Amount"}),e("th",{children:r(()=>h.reduce((c,u)=>Number(u.amount)+c,0)+" \u20B9")}),e("td",{colSpan:3})]})})]})}),e(q,{editValue:o,setEditValue:d,modalObj:i(s({},l),{onSubmit:y,isLoading:m})})]})};export{K as default};
