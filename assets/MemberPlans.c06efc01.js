import{j as a,b as i,r as h,F as x}from"./vendor.abe5e19c.js";import{b as k,u as w,M as p,T as e,B as M,g as l}from"./index.6b6b7103.js";import{C as H}from"./Card.0a56d7c5.js";import{M as N}from"./Modal.395016a9.js";const P=({modalObj:n,editValue:d,setEditValue:o})=>a(N,{...n,modalWidth:"700px",children:i("div",{className:"modal-body two-col-grid",children:[i("fieldset",{className:"form-group",children:[a("label",{children:"Package Name"}),a("input",{type:"text",value:d.package_name,onChange:r=>o({...d,package_name:r.target.value}),className:"form-control",placeholder:"Package Name",required:!0})]}),i("fieldset",{className:"form-group",children:[a("label",{children:"Package Amount"}),a("input",{type:"text",value:d.package_amount,onChange:r=>o({...d,package_amount:r.target.value}),className:"form-control",placeholder:"Package Amount",required:!0})]}),i("fieldset",{className:"form-group",children:[a("label",{children:"Package Validity Days"}),a("input",{type:"text",value:d.package_validity_days,onChange:r=>o({...d,package_validity_days:r.target.value}),className:"form-control",placeholder:"Package Validity Days",required:!0})]}),i("fieldset",{className:"form-group",children:[a("label",{children:"Package Validity Months"}),a("input",{type:"text",value:d.package_validity_months,onChange:r=>o({...d,package_validity_months:r.target.value}),className:"form-control",placeholder:"Package Validity Months",required:!0})]})]})}),L=()=>{const[n,d]=h.exports.useState({formId:"staff-member-form-edit",modalId:"staff-member-modal-edit",title:"Edit Member Plans"}),{isLoading:o,callback:r}=k(),{isLoading:S,callback:y}=k(),{data:m,setData:g,loadingDone:_}=w({method:"get",url:p},"packages"),[u,f]=h.exports.useState({package_name:"",package_amount:"",package_validity_days:"",package_validity_months:""});function b(t,s){y({method:"get",url:p+"/"+t.id+"/edit",success:c=>{window.Notify({status:"success",message:c.data.message}),e.fn.updateTableWithId(m,{...t,is_active:s},g,"id")}})}function v(){let t=new FormData;for(var s in u)t.append(s,u[s]);t.append("_method","patch"),r({method:"post",url:p+"/"+u.id,data:t,headers:{"Content-Type":"multipart/form-data"},success:c=>{window.Notify({status:"success",message:c.data.message}),window.$(`#${n.modalId}`).modal("hide"),e.fn.updateTableWithId(m,c.data.package,g,"id")},error:c=>{window.$(`#${n.modalId}`).modal("hide")}})}function T(t){f(t),window.$(`#${n.modalId}`).modal("show"),window.$(`#${n.formId}`).off("submit"),window.$(`#${n.formId}`).on("submit",function(){d({...n,isLoading:!0})})}return h.exports.useEffect(()=>(e.search.clear(),e.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",6),()=>{e.search.clear()}),[]),i(x,{children:[a(M,{title:"Member Plans",links:[{name:"Home",link:"/branch-admin"},{name:"Member Plans",link:"/branch-admin/member-plans"}]}),a(H,{title:"Member Plans",button:{name:"Add",link:"member-plan-add"},children:i(e,{tableId:".table-brand-staff",loadingDone:_,footerSelect:!0,filter:!0,footer:[{index:2,text:"\u20B9"}],children:[a(e.Header,{children:i(e.Row,{children:[a(e.TH,{children:"Id"}),a(e.TH,{children:"Plan Name"}),a(e.TH,{children:"Amount"}),a(e.TH,{children:"Package Validity Days"}),a(e.TH,{children:"Package Validity Months"}),a(e.TH,{children:"Status"}),a(e.TH,{children:"Date"}),a(e.TH,{children:"Actions"})]})}),a(e.Body,{children:m&&m.map((t,s)=>i(e.Row,{children:[a(e.TH,{children:l(()=>t.id)}),a(e.TH,{children:l(()=>t.package_name)}),a(e.TH,{children:l(()=>t.package_amount)}),a(e.TH,{children:l(()=>t.package_validity_days)}),a(e.TH,{children:l(()=>t.package_validity_months)}),a(e.TH,{children:t.is_active?a("span",{className:"cursor-pointer badge badge-success",onClick:()=>b(t,!1),children:"Active"}):a("span",{className:"cursor-pointer badge badge-danger",onClick:()=>b(t,!0),children:"In Active"})}),a(e.TH,{children:l(()=>new Date(t.created_at).toLocaleDateString())}),a(e.TH,{children:a("i",{className:"feather icon-edit cursor-pointer",onClick:()=>T(t)})})]},t.id))}),a(e.Footer,{children:i("tr",{children:[a("td",{colSpan:"2"}),a("th",{}),a("td",{colSpan:5})]})})]})}),a(P,{editValue:u,setEditValue:f,modalObj:{...n,onSubmit:v,isLoading:o}})]})};export{L as default};
