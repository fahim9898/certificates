import{j as e,b as d,r as u,F as w,L as x}from"./vendor.abe5e19c.js";import{u as C,b as I,B as A,T as a,a as f,r as v,t as M}from"./index.955d3a5f.js";import{C as S}from"./Card.0a56d7c5.js";import{M as j}from"./Modal.395016a9.js";import"./InputLable.a582803e.js";const B=({modalObj:l,editValue:i,setEditValue:o})=>{function t(r){const{name:s,value:c}=r.target;o({...i,[s]:c})}return e(j,{...l,modalWidth:"700px",children:d("div",{className:"modal-body two-col-grid",children:[d("fieldset",{className:"form-group",children:[e("label",{children:"Name"}),e("input",{type:"text",name:"branch_name",value:i.branch_name,onChange:r=>t(r),className:"form-control",placeholder:"Name",required:!0})]}),d("fieldset",{className:"form-group",children:[e("label",{children:"Address"}),e("input",{type:"text",name:"branch_address",value:i.branch_address,onChange:r=>t(r),className:"form-control",placeholder:"Address",required:!0})]}),d("fieldset",{className:"form-group",children:[e("label",{children:"City"}),e("input",{type:"text",name:"city",value:i.city,onChange:r=>t(r),className:"form-control",placeholder:"City",required:!0})]}),d("fieldset",{className:"form-group",children:[e("label",{children:"State"}),e("input",{type:"text",name:"state",value:i.state,onChange:r=>t(r),className:"form-control",placeholder:"State",required:!0})]}),d("fieldset",{className:"form-group",children:[e("label",{children:"Phone"}),e("input",{type:"number",name:"phone",value:i.phone,onChange:r=>t(r),className:"form-control",placeholder:"Phone",required:!0})]}),d("fieldset",{className:"form-group",children:[e("label",{children:"Branch Logo"}),e("input",{type:"file",accept:"image/*",name:"profile_pic",id:"admin-profile-pic",className:"form-control"})]})]})})},R=()=>{const[l,i]=u.exports.useState({formId:"branch-form-edit",modalId:"branch-modal-edit",title:"Edit Branch"}),[o,t]=u.exports.useState({branch_name:"",branch_address:"",city:"",state:"",phone:""}),{data:r,setData:s,loadingDone:c}=C({method:"get",url:v},"branches"),{isLoading:g,callback:b}=I(),T="Branches",H=[{name:"Home",link:"/gym-admin/"},{name:"Branches",link:"/gym-admin/branches"}];function N(n){t(n),window.$(`#${l.modalId}`).modal("show"),window.$(`#${l.formId}`).off("submit")}function y(){let n=new FormData;for(var m in o)n.append(m,o[m]);let p=$('#branch-form-edit input[type="file"]')[0]?.files[0];n.delete("branch_logo"),p&&n.append("branch_logo",p),n.append("_method","patch"),b({method:"post",url:M+"/"+o.id,data:n,headers:{"Content-Type":"multipart/form-data"},success:h=>{window.Notify({status:"success",message:h.data.message}),window.$(`#${l.modalId}`).modal("hide");let _={...o,branch_logo:h.data?.branch?.branch_logo};a.fn.updateTableWithId(r,_,s,"id")},error:h=>{window.$(`#${l.modalId}`).modal("hide")}})}return d(w,{children:[e(A,{title:T,links:H}),e(S,{title:"Branches",button:{name:"Add",link:"branch-add"},children:d(a,{loadingDone:c,footerSelect:!0,children:[e(a.Header,{children:d(a.Row,{children:[e(a.TH,{children:"Id"}),e(a.TH,{children:"Name"}),e(a.TH,{children:"Logo"}),e(a.TH,{children:"Address"}),e(a.TH,{children:"City"}),e(a.TH,{children:"State"}),e(a.TH,{children:"Phone"}),e(a.TH,{children:"Start Date"}),e(a.TH,{children:"End Date"}),e(a.TH,{children:"Remaining Days"}),e(a.TH,{children:"Status"}),e(a.TH,{children:"Actions"})]})}),e(a.Body,{children:r&&r.map((n,m)=>d(a.Row,{children:[e(a.TH,{children:n.id}),e(a.TH,{children:n.branch_name}),e(a.TH,{children:e("a",{href:f(n.branch_logo),"data-fancybox":"images",children:e("img",{className:"table-img",src:f(n.branch_logo),alt:""})})}),e(a.TH,{children:n.branch_address}),e(a.TH,{children:n.city}),e(a.TH,{children:n.state}),e(a.TH,{children:n.phone}),e(a.TH,{children:n.start_date}),e(a.TH,{children:n.end_date}),e(a.TH,{children:n.remaining_days}),e(a.TH,{children:n.is_active?e("span",{className:"badge badge-success",children:"Active"}):e("span",{className:"badge badge-danger",children:"In Active"})}),d(a.TH,{children:[e("i",{className:"feather icon-edit cursor-pointer mr-1",onClick:()=>N(n)}),e(x,{to:"/gym-admin/branches/"+n.id,children:d("span",{className:"badge badge-info",children:[e("i",{className:"feather icon-eye"})," View"]})})]})]},n.id))})]})}),e(B,{editValue:o,setEditValue:t,modalObj:{...l,onSubmit:y,isLoading:g}})]})};export{R as default};
