var N=Object.defineProperty,P=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var v=(i,t,n)=>t in i?N(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,l=(i,t)=>{for(var n in t||(t={}))A.call(t,n)&&v(i,n,t[n]);if(_)for(var n of _(t))I.call(t,n)&&v(i,n,t[n]);return i},c=(i,t)=>P(i,S(t));import{j as a,b as r,r as g,F as C}from"./vendor.abe5e19c.js";import{b as T,u as D,M as f,T as e,B as $,g as s}from"./index.945cac23.js";import{C as j}from"./Card.0a56d7c5.js";import{M as L}from"./Modal.395016a9.js";const E=({modalObj:i,editValue:t,setEditValue:n})=>a(L,c(l({},i),{modalWidth:"700px",children:r("div",{className:"modal-body two-col-grid",children:[r("fieldset",{className:"form-group",children:[a("label",{children:"Package Name"}),a("input",{type:"text",value:t.package_name,onChange:o=>n(c(l({},t),{package_name:o.target.value})),className:"form-control",placeholder:"Package Name",required:!0})]}),r("fieldset",{className:"form-group",children:[a("label",{children:"Package Amount"}),a("input",{type:"text",value:t.package_amount,onChange:o=>n(c(l({},t),{package_amount:o.target.value})),className:"form-control",placeholder:"Package Amount",required:!0})]}),r("fieldset",{className:"form-group",children:[a("label",{children:"Package Validity Days"}),a("input",{type:"text",value:t.package_validity_days,onChange:o=>n(c(l({},t),{package_validity_days:o.target.value})),className:"form-control",placeholder:"Package Validity Days",required:!0})]}),r("fieldset",{className:"form-group",children:[a("label",{children:"Package Validity Months"}),a("input",{type:"text",value:t.package_validity_months,onChange:o=>n(c(l({},t),{package_validity_months:o.target.value})),className:"form-control",placeholder:"Package Validity Months",required:!0})]})]})})),J=()=>{const[i,t]=g.exports.useState({formId:"staff-member-form-edit",modalId:"staff-member-modal-edit",title:"Edit Member Plans"}),{isLoading:n,callback:o}=T(),{isLoading:B,callback:x}=T(),{data:h,setData:b,loadingDone:w}=D({method:"get",url:f},"packages"),[p,k]=g.exports.useState({package_name:"",package_amount:"",package_validity_days:"",package_validity_months:""});function y(d,m){x({method:"get",url:f+"/"+d.id+"/edit",success:u=>{window.Notify({status:"success",message:u.data.message}),e.fn.updateTableWithId(h,c(l({},d),{is_active:m}),b,"id")}})}function M(){let d=new FormData;for(var m in p)d.append(m,p[m]);d.append("_method","patch"),o({method:"post",url:f+"/"+p.id,data:d,headers:{"Content-Type":"multipart/form-data"},success:u=>{window.Notify({status:"success",message:u.data.message}),window.$(`#${i.modalId}`).modal("hide"),e.fn.updateTableWithId(h,u.data.package,b,"id")},error:u=>{window.$(`#${i.modalId}`).modal("hide")}})}function H(d){k(d),window.$(`#${i.modalId}`).modal("show"),window.$(`#${i.formId}`).off("submit"),window.$(`#${i.formId}`).on("submit",function(){t(c(l({},i),{isLoading:!0}))})}return g.exports.useEffect(()=>(e.search.clear(),e.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",6),()=>{e.search.clear()}),[]),r(C,{children:[a($,{title:"Member Plans",links:[{name:"Home",link:"/branch-admin"},{name:"Member Plans",link:"/branch-admin/member-plans"}]}),a(j,{title:"Member Plans",button:{name:"Add",link:"member-plan-add"},children:r(e,{tableId:".table-brand-staff",loadingDone:w,footerSelect:!0,filter:!0,footer:[{index:2,text:"\u20B9"}],children:[a(e.Header,{children:r(e.Row,{children:[a(e.TH,{children:"Id"}),a(e.TH,{children:"Plan Name"}),a(e.TH,{children:"Amount"}),a(e.TH,{children:"Package Validity Days"}),a(e.TH,{children:"Package Validity Months"}),a(e.TH,{children:"Status"}),a(e.TH,{children:"Date"}),a(e.TH,{children:"Actions"})]})}),a(e.Body,{children:h&&h.map((d,m)=>r(e.Row,{children:[a(e.TH,{children:s(()=>d.id)}),a(e.TH,{children:s(()=>d.package_name)}),a(e.TH,{children:s(()=>d.package_amount)}),a(e.TH,{children:s(()=>d.package_validity_days)}),a(e.TH,{children:s(()=>d.package_validity_months)}),a(e.TH,{children:d.is_active?a("span",{className:"cursor-pointer badge badge-success",onClick:()=>y(d,!1),children:"Active"}):a("span",{className:"cursor-pointer badge badge-danger",onClick:()=>y(d,!0),children:"In Active"})}),a(e.TH,{children:s(()=>new Date(d.created_at).toLocaleDateString())}),a(e.TH,{children:a("i",{className:"feather icon-edit cursor-pointer",onClick:()=>H(d)})})]},d.id))}),a(e.Footer,{children:r("tr",{children:[a("td",{colSpan:"2"}),a("th",{}),a("td",{colSpan:5})]})})]})}),a(E,{editValue:p,setEditValue:k,modalObj:c(l({},i),{onSubmit:M,isLoading:n})})]})};export{J as default};
