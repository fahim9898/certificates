import{j as a,c as l,r as p,F as v}from"./vendor.436bddb5.js";import{b as w,T as e,u as b,B as T,e as o}from"./index.72f35460.js";import{C as N}from"./Card.50e90fed.js";import{M as H}from"./Modal.e818ba0e.js";const S=({modalObj:r,editValue:n,setEditValue:d})=>a(H,{...r,children:l("div",{className:"modal-body two-col-grid",children:[l("fieldset",{className:"form-group",children:[a("label",{children:"Plan Name"}),a("input",{type:"text",value:n.plan_name,onChange:i=>d({...n,plan_name:i.target.value}),className:"form-control",placeholder:"Plan Name",required:!0})]}),l("fieldset",{className:"form-group",children:[a("label",{children:"Plan Amount"}),a("input",{type:"text",value:n.plan_amount,onChange:i=>d({...n,plan_amount:i.target.value}),className:"form-control",placeholder:"Plan Amount",required:!0})]}),l("fieldset",{className:"form-group",children:[a("label",{children:"Plan Validity Days"}),a("input",{type:"text",value:n.plan_validity_days,onChange:i=>d({...n,plan_validity_days:i.target.value}),className:"form-control",placeholder:"Plan Validity Days",required:!0})]}),l("fieldset",{className:"form-group",children:[a("label",{children:"Plan Validity Months"}),a("input",{type:"text",value:n.plan_validity_months,onChange:i=>d({...n,plan_validity_months:i.target.value}),className:"form-control",placeholder:"Plan Validity Months",required:!0})]})]})}),C=()=>{const{callback:r}=w();p.exports.useEffect(()=>{e.search.clear(),e.search.push([{id:"#sas-amount-min",type:"text",placeholder:"Min Amount"},{id:"#sas-amount-max",type:"text",placeholder:"Max Amount"}],"input-search","minmax",2),e.search.push([{id:"#sas-validity-day-min",type:"text",placeholder:"Min Validity Days"},{id:"#sas-validity-day-max",type:"text",placeholder:"Max Validity Days"}],"input-search","minmax",3),e.search.push([{id:"#sas-validity-month-min",type:"text",placeholder:"Min Validity Months"},{id:"#sas-validity-month-max",type:"text",placeholder:"Max Validity Months"}],"input-search","minmax",4),e.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",6)},[]);const[n,d]=p.exports.useState({formId:"sas-plan-form-edit",modalId:"sas-plan-modal-edit",title:"Sas Plan Edit",isLoading:!1}),[i,u]=p.exports.useState({plan_name:"",plan_amount:"",plan_validity_days:"",plan_validity_months:""}),{data:s,setData:y,loadingDone:_}=b({method:"get",url:o},"sas_subscriptions");function f(t,c){let m={};c?m={method:"get",url:o+"/"+t.id}:m={method:"post",url:o+"/"+t.id,data:{_method:"delete"}},r({...m,success:function(h){window.Notify({status:"success",message:h.data.message}),e.fn.updateTableWithId(s,{...t,is_active:c},y,"id")},error:function(h){window.Notify({status:"error",message:window.handleError(h)})}})}function x(){window.api({method:"post",url:o+"/"+i.id,data:{plan_name:i.plan_name,plan_amount:i.plan_amount,plan_validity_days:i.plan_validity_days,plan_validity_months:i.plan_validity_months,_method:"patch"}}).then(t=>{window.Notify({status:"success",message:t.data.message}),d({...n,isLoading:!1}),window.$(`#${n.modalId}`).modal("hide"),e.fn.updateTableWithId(s,i,y,"id")}).catch(t=>{window.Notify({status:"error",message:window.handleError(t)}),d({...n,isLoading:!1}),window.$(`#${n.modalId}`).modal("hide")})}function g(t){u(t),window.$(`#${n.modalId}`).modal("show"),window.$(`#${n.formId}`).off("submit"),window.$(`#${n.formId}`).on("submit",function(){d({...n,isLoading:!0})})}return l(v,{children:[a(T,{title:"Sas Plans",links:[{name:"Home",link:"/super-admin"},{name:"Sas Plans",link:"/super-admin/sas-plans"}]}),a(N,{title:"Sas Plans",button:{name:"Add",link:"sas-plan-add"},children:l(e,{loadingDone:_,footerSelect:!0,filter:!0,footer:[{index:2,text:"\u20B9"}],children:[a(e.Header,{children:l(e.Row,{children:[a(e.TH,{children:"Id"}),a(e.TH,{children:"Name"}),a(e.TH,{children:"Amount"}),a(e.TH,{children:"Validity Days"}),a(e.TH,{children:"Validity Months"}),a(e.TH,{children:"Active"}),a(e.TH,{children:"Date"}),a(e.TH,{children:"Actions"})]})}),a(e.Body,{children:s&&s.map((t,c)=>l(e.Row,{children:[a(e.TH,{children:t.id}),a(e.TH,{children:t.plan_name}),a(e.TH,{children:t.plan_amount}),a(e.TH,{children:t.plan_validity_days}),a(e.TH,{children:t.plan_validity_months}),a(e.TH,{children:t.is_active?a("span",{className:"cursor-pointer badge badge-success",onClick:()=>f(t,!1),children:"Active"}):a("span",{className:"cursor-pointer badge badge-danger",onClick:()=>f(t,!0),children:"In Active"})}),a(e.TH,{children:new Date(t.created_at).toIndiaDate()}),a(e.TH,{children:a("i",{className:"feather icon-edit cursor-pointer",onClick:()=>g(t)})})]},t.id))}),a(e.Footer,{children:l("tr",{children:[a("td",{colSpan:"2"}),a("th",{}),a("td",{colSpan:"5"})]})})]})}),a(S,{editValue:i,setEditValue:u,modalObj:{...n,onSubmit:x}})]})};export{C as default};
