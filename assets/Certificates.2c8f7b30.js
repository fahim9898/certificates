import{r as u,j as e,d,F as x,L as H}from"./vendor.07a30449.js";import{a as N,I as f,B as w,g as n,A as C}from"./index.dda9eafe.js";import{C as y}from"./Card.9e07570d.js";import{M as A,T as t,P as L}from"./Modal.05caa1dd.js";import{u as g,a as S}from"./useFetch.58e364b6.js";import"./motion.b8bd9615.js";const k=({modalObj:l,editValue:r,setEditValue:s})=>{const[o,c]=u.exports.useState(null),[p,b]=u.exports.useState([]),{loadingDone:m,callback:h}=g();return u.exports.useEffect(()=>{h({method:"get",url:N,success:a=>{c(a.data)}})},[]),e(A,{...l,modalWidth:"700px",children:d("div",{className:"modal-body one-col-grid",children:[d("div",{className:"row",children:[e("div",{className:"col-md-6",children:e(f.LabelInput,{className:"form-control",type:"text",required:!0,value:r.first_name,onChange:a=>s({...r,first_name:a.target.value}),label:"First Name",invalidText:"First Name is required"})}),e("div",{className:"col-md-6",children:e(f.LabelInput,{className:"form-control",type:"text",required:!0,value:r.last_name,onChange:a=>s({...r,last_name:a.target.value}),label:"Last Name",invalidText:"Last Name is required"})})]}),d(f.LabelSelect,{required:!0,label:"Course",value:r.course,onChange:a=>{s({...r,course:a.target.value}),b(o.filter(T=>T.name==a.target.value)[0].types)},invalidText:"Need to select Course",children:[e("option",{value:"",children:"Select Course"}),o&&o.map(a=>e("option",{value:a.name,children:a.name},a.id))]}),d(f.LabelSelect,{value:r.completion,required:!0,label:"Type",onChange:a=>{s({...r,completion:a.target.value})},invalidText:"Need to select Type",children:[e("option",{value:"",children:"Select Type"}),o&&o.filter(a=>a.name==r.course)[0]?.types.map(a=>e("option",{value:a.name,children:a.name},a.id))]})]})})},O=()=>{const[l,r]=u.exports.useState({formId:"staff-member-form-edit",modalId:"staff-member-modal-edit",title:"Edit Certificate",visible:!1}),{isLoading:s,callback:o}=g(),{data:c,setData:p,loadingDone:b}=S({method:"get",url:C}),[m,h]=u.exports.useState({name:"",types:[]});function a(){o({method:"put",url:C+"/"+m._id,data:m,success:i=>{window.Notify({status:"success",message:"Certificate Updated Successfully"}),window.$(`#${l.modalId}`).modal("hide");let v={...m,...i.data};t.fn.updateTableWithId(c,v,p,"_id")},error:i=>{window.$(`#${l.modalId}`).modal("hide")}})}function T(i){i.types,h({...i}),r({...l,visible:!0}),window.$(`#${l.modalId}`).modal("show"),window.$(`#${l.formId}`).off("submit")}return d(x,{children:[e(w,{title:"Certificates",links:[{name:"Home",link:"/admin"},{name:"Certificates",link:"/admin/certificates"}],select:!0}),e(y,{title:"Certificates",button:{name:"Add",link:"certificates-add"},children:d(t,{tableId:".table-brand-staff",loadingDone:b,footerSelect:!0,children:[e(t.Header,{children:d(t.Row,{children:[e(t.TH,{children:"Id"}),e(t.TH,{children:"First Name"}),e(t.TH,{children:"Last Name"}),e(t.TH,{children:"Course"}),e(t.TH,{children:"Type"}),e(t.TH,{children:"Link"}),e(t.TH,{children:"Created At"}),e(t.TH,{children:"Updated At"}),e(t.TH,{children:"Actions"})]})}),e(t.Body,{children:c&&c.map((i,v)=>d(t.Row,{children:[e(t.TH,{children:n(()=>i._id)}),e(t.TH,{children:n(()=>i.first_name)}),e(t.TH,{children:n(()=>i.last_name)}),e(t.TH,{children:n(()=>i.course)}),e(t.TH,{children:n(()=>i.completion)}),e(t.TH,{children:n(()=>e(H,{to:"/"+i.course.replaceAll(" ","-")+"/"+i._id,children:"Link"}))}),e(t.TH,{children:n(()=>new Date(i.createdAt).toIndiaDate())}),e(t.TH,{children:n(()=>new Date(i.updatedAt).toIndiaDate())}),d(t.TH,{children:[e("i",{className:"feather icon-edit cursor-pointer",onClick:()=>T(i)}),e(L,{title:"Are you sure to delete this Certificate?",onConfirm:()=>new Promise(I=>{o({method:"delete",url:C+"/"+i._id,success:F=>(t.fn.deleteTableWithId(c,i,p,"_id"),I())})}),okText:"Yes",cancelText:"No",children:e("i",{className:"feather pl-1 icon-trash cursor-pointer text-danger"})})]})]},i.id))})]})}),e(k,{editValue:m,setEditValue:h,modalObj:{...l,onSubmit:a,isLoading:s}})]})};export{O as default};
