var _=Object.defineProperty,S=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var x=(o,a,n)=>a in o?_(o,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[a]=n,s=(o,a)=>{for(var n in a||(a={}))I.call(a,n)&&x(o,n,a[n]);if(f)for(var n of f(a))B.call(a,n)&&x(o,n,a[n]);return o},m=(o,a)=>S(o,H(a));import{r as u,b as t,j as e,q as j,F as q}from"./vendor.abe5e19c.js";import{g as l,a as C,p as D,u as k,T as r,b as y,B as A,q as M}from"./index.6b6b7103.js";import{C as P}from"./Card.0a56d7c5.js";import{M as L}from"./Modal.395016a9.js";import"./InputLable.a582803e.js";const F=({modalObj:o,editValue:a,setEditValue:n})=>{var b;return u.exports.useState({name:"",phone:""}),t(L,m(s({},o),{submitButton:"Print",modalWidth:"700px",children:[t("div",{className:"modal-body two-col-grid",children:[t("fieldset",{className:"form-group",children:[e("label",{children:"Customer Name"}),e("input",{type:"text",value:a.x_name,onChange:h=>n(m(s({},a),{x_name:h.target.value})),className:"form-control",placeholder:"Customer Name",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Customer Phone"}),e("input",{type:"number",value:a.x_phone,onChange:h=>n(m(s({},a),{x_phone:h.target.value})),className:"form-control",placeholder:"Customer Phone",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Item Name"}),e("input",{type:"text",disabled:!0,value:(b=a.stock_item)==null?void 0:b.particular,className:"form-control",placeholder:"Item Name",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Qty"}),e("input",{type:"number",disabled:!0,value:a.qty,className:"form-control",placeholder:"Qty",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Rate"}),e("input",{type:"number",disabled:!0,value:a.rate,className:"form-control",placeholder:"Rate",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Amount"}),e("input",{type:"number",disabled:!0,value:a.amount,className:"form-control",placeholder:"Amount",required:!0})]})]}),e("div",{id:"print-sale",className:"row d-none",children:t("div",{className:"card-body p-2",children:[e("div",{className:"card-header px-0",children:t("div",{className:"row",children:[t("div",{className:"col-md-12 col-lg-7 col-xl-4 mb-50",children:[t("span",{className:"invoice-id font-weight-bold",children:["# Invoice: ",l(()=>a.branch.branch_name)," ",l(()=>a.id)]}),e("span",{})]}),e("div",{className:"col-md-12 col-lg-5 col-xl-8",children:e("div",{className:"d-flex align-items-center justify-content-end justify-content-xs-start",children:t("div",{className:"issue-date pr-2",children:[t("span",{className:"font-weight-bold no-wrap",children:["Issue Date:"," "]}),e("span",{children:new Date().toISOString().split("T")[0]}),"\xA0\xA0",t("span",{className:"font-weight-bold no-wrap",children:["Bill Date:"," "]}),e("span",{children:l(()=>new Date(a.created_at).toISOString().split("T")[0])})]})})})]})}),t("div",{className:"invoice-logo-title row pt-2",children:[e("div",{className:"col-6 d-flex flex-column justify-content-center align-items-start",children:e("h2",{className:"text-primary",children:"Gym Invoice"})}),e("div",{className:"col-6 d-flex justify-content-end invoice-logo",children:e("img",{src:C(l(()=>a.branch_logo)),style:{maxHeight:"50px",objectFit:"cover",marginRight:"20px"}})})]}),e("hr",{}),t("div",{className:"row invoice-adress-info py-2",children:[t("div",{className:"col-6 mt-1 from-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill From"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:l(()=>a.sale_transaction.sold_by.name)})}),e("div",{className:"company-email  mb-1 mb-1",children:e("span",{className:"text-muted",children:l(()=>a.sale_transaction.sold_by.email)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:l(()=>a.sale_transaction.sold_by.phone)})})]}),t("div",{className:"col-6 mt-1 to-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill To"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:l(()=>a.x_name)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:l(()=>a.x_phone)})})]})]}),e("div",{className:"product-details-table py-2 table-responsive",children:t("table",{className:"table table-borderless",children:[e("thead",{children:t("tr",{children:[e("th",{scope:"col",children:"ITEM"}),e("th",{scope:"col",children:"COST"}),e("th",{scope:"col",children:"QTY"}),e("th",{scope:"col",children:"PRICE"})]})}),e("tbody",{children:t("tr",{children:[e("td",{children:l(()=>a.stock_item.particular)}),e("td",{children:l(()=>a.amount)}),e("td",{children:l(()=>a.qty)}),e("td",{className:"font-weight-bold",children:l(()=>(a.amount*a.qty).toFixed(2)+" \u20B9")})]})}),e("tfoot",{style:{borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:t("tr",{children:[e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),t("td",{style:{borderBottom:"0px"},className:"font-weight-bold",children:["Total:"," ",l(()=>(a.amount*a.qty).toLocaleString("en-IN")+" \u20B9")]})]})})]})}),e("div",{className:"invoice-total pb-2",children:t("div",{className:"row",children:[e("div",{className:"col-8 col-sm-6 d-flex justify-content-end mt-75",children:e("ul",{className:"list-group cost-list d-none ",children:t("li",{className:"list-group-item each-cost border-0 p-50 d-flex justify-content-between",children:[e("span",{className:"cost-title mr-2",children:"Total "}),e("span",{className:"cost-value",children:l(()=>(a.amount*a.qty).toFixed(2)+" \u20B9")})]})})}),e("div",{className:"col-4 col-sm-6 mt-0",children:e("p",{className:"text-right",children:"Thanks for your business."})})]})})]})})]}))},J=()=>{let o=j(),a=D+(o.id?"/"+o.id:"");const{data:n,setData:b,loadingDone:h}=k({method:"get",url:a},c=>{var i,d;return o.id?[(i=c.data)==null?void 0:i.branches]:(d=c.data)==null?void 0:d.branches});u.exports.useEffect(()=>(r.search.clear(),r.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",8),()=>{r.search.clear()}),[]);const[p,E]=u.exports.useState({formId:"print-form-edit",modalId:"print-modal-edit",title:"Print Bill"}),[g,N]=u.exports.useState({particular:"",qty:"",rate:"",amount:""}),{isLoading:v,callback:O}=y();y();function T(c){N(m(s({},c),{x_name:"",x_phone:"",branch:n==null?void 0:n.branch})),window.$(`#${p.modalId}`).modal("show"),window.$(`#${p.formId}`).off("submit")}function w(){M("print-sale"),window.$(`#${p.modalId}`).modal("hide")}return t(q,{children:[e(A,{title:"Sales",links:[{name:"Home",link:"/gym-admin"},{name:"Sales",link:"/gym-admin/sales"}]}),e(P,{title:"Sales",children:t(r,{tableId:".table-brand-staff",loadingDone:h,footerSelect:!0,filter:!0,footer:[{index:5,text:"\u20B9"},{index:4,text:"\u20B9"},{index:3,text:""}],children:[e(r.Header,{children:t(r.Row,{children:[e(r.TH,{children:"Id"}),e(r.TH,{children:"Branch"}),e(r.TH,{children:"Name"}),e(r.TH,{children:"Qty"}),e(r.TH,{children:"Selling Price"}),e(r.TH,{children:"Amount"}),e(r.TH,{children:"Note"}),e(r.TH,{children:"Sold By"}),e(r.TH,{children:"Date"}),e(r.TH,{children:"Actions"})]})}),e(r.Body,{children:n&&n.map(c=>c.sale.map((i,d)=>t(r.Row,{children:[e(r.TH,{children:l(()=>i.id)}),e(r.TH,{children:l(()=>c.branch_name)}),e(r.TH,{children:l(()=>i.stock_item.particular)}),e(r.TH,{children:l(()=>i.qty)}),e(r.TH,{children:l(()=>i.amount)}),e(r.TH,{children:l(()=>i.amount*i.qty)}),e(r.TH,{children:l(()=>i.sale_transaction.note)}),e(r.TH,{children:l(()=>i.sale_transaction.sold_by.name)}),e(r.TH,{children:l(()=>new Date(i.created_at).toLocaleDateString())}),e(r.TH,{children:t("span",{className:"cursor-pointer badge badge-info",onClick:()=>T(s(s({},c),i)),children:[e("i",{className:"feather icon-printer"})," Print"]})})]},i.id)))}),e(r.Footer,{children:t("tr",{children:[e("td",{colSpan:3,className:"text-right",children:"Total"}),e("th",{children:l(()=>n.reduce((c,i)=>(i.sale.map(d=>{c=Number(d.qty)+c}),c),0))}),e("th",{children:l(()=>n.reduce((c,i)=>(i.sale.map(d=>{c=Number(d.amount)+c}),c),0))}),e("th",{children:l(()=>n.reduce((c,i)=>(i.sale.map(d=>{c=Number(d.amount)*Number(d.qty)+c}),c),0))}),e("td",{colSpan:4})]})})]})}),e(F,{editValue:g,setEditValue:N,modalObj:m(s({},p),{onSubmit:w,isLoading:v})})]})};export{J as default};
