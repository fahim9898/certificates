var q=Object.defineProperty,F=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var _=(d,t,r)=>t in d?q(d,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[t]=r,s=(d,t)=>{for(var r in t||(t={}))R.call(t,r)&&_(d,r,t[r]);if(I)for(var r of I(t))W.call(t,r)&&_(d,r,t[r]);return d},c=(d,t)=>F(d,O(t));import{j as e,b as m,r as T,q as G,F as Y}from"./vendor.abe5e19c.js";import{u as U,b as y,T as a,B as z,g as f,a as C,r as N,t as J}from"./index.6b6b7103.js";import{C as K}from"./Card.0a56d7c5.js";import{M as Q}from"./Modal.395016a9.js";import"./InputLable.a582803e.js";const V=({modalObj:d,editValue:t,setEditValue:r})=>{function p(o){const{name:b,value:u}=o.target;r(c(s({},t),{[b]:u}))}return e(Q,c(s({},d),{modalWidth:"700px",children:m("div",{className:"modal-body two-col-grid",children:[m("fieldset",{className:"form-group",children:[e("label",{children:"Name"}),e("input",{type:"text",name:"name",value:t.name,onChange:o=>p(o),className:"form-control",placeholder:"Name",required:!0})]}),m("fieldset",{className:"form-group",children:[e("label",{children:"Email"}),e("input",{type:"email",name:"email",value:t.email,onChange:o=>p(o),className:"form-control",placeholder:"Email",required:!0})]}),m("fieldset",{className:"form-group",children:[e("label",{children:"Phone"}),e("input",{type:"text",name:"phone",value:t.phone,onChange:o=>p(o),className:"form-control",placeholder:"Phone",required:!0})]}),m("fieldset",{className:"form-group",children:[e("label",{children:"Profile Picture"}),e("input",{type:"file",accept:"image/*",name:"profile_pic",id:"admin-profile-pic",className:"form-control"})]})]})}))},de=()=>{const[d,t]=T.exports.useState({formId:"admin-form-edit",modalId:"admin-modal-edit",title:"Edit Admin"}),[r,p]=T.exports.useState({name:"",email:"",phone:""});let o=G(),b=J;const{data:u,setData:H,loadingDone:S}=U({method:"get",url:b},i=>o.id?i.data.branches.reduce((l,n)=>(n.id==o.id&&l.push(...n.branch_admin.map(h=>c(s({},h),{branch:n}))),l),[]):i.data.branches.reduce((l,n)=>(l.push(...n.branch_admin.map(h=>c(s({},h),{branch:n}))),l),[])),{isLoading:X,callback:v}=y(),{isLoading:D,callback:M}=y();function x(i,l){let n={};l?n={method:"get",url:N+"/"+i.id}:n={method:"delete",url:N+"/"+i.id},v(c(s({},n),{success:h=>{window.Notify({status:"success",message:h.data.message}),a.fn.updateTableWithId(u,c(s({},i),{is_active:l}),H,"id")}}))}T.exports.useEffect(()=>(a.search.clear(),a.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",7),()=>{a.search.clear()}),[]);const E="Admins",k=[{name:"Home",link:"/gym-admin"},{name:"Admins",link:"/gym-admin/admins"}];let j=0;function L(i){p(i),window.$(`#${d.modalId}`).modal("show"),window.$(`#${d.formId}`).off("submit")}function P(){var h;let i=new FormData;for(var l in r)i.append(l,r[l]);let n=(h=$('#admin-form-edit input[type="file"]')[0])==null?void 0:h.files[0];i.delete("profile_pic"),n&&i.append("profile_pic",n),i.append("_method","patch"),M({method:"post",url:N+"/"+r.id,data:i,headers:{"Content-Type":"multipart/form-data"},success:g=>{var w,A;window.Notify({status:"success",message:g.data.message}),window.$(`#${d.modalId}`).modal("hide");let B=c(s({},r),{profile_pic:(A=(w=g.data)==null?void 0:w.branch_admin)==null?void 0:A.profile_pic});a.fn.updateTableWithId(u,B,H,"id")},error:g=>{window.$(`#${d.modalId}`).modal("hide")}})}return m(Y,{children:[e(z,{title:E,links:k}),e(K,{title:"Admins",button:{name:"Add",link:"admin-add"},children:m(a,{tableId:".table-brand-staff",loadingDone:S,footerSelect:!0,filter:!0,children:[e(a.Header,{children:m(a.Row,{children:[e(a.TH,{children:"Id"}),e(a.TH,{children:"Branch"}),e(a.TH,{children:"Name"}),e(a.TH,{children:"Email"}),e(a.TH,{children:"Profile"}),e(a.TH,{children:"Phone"}),e(a.TH,{children:"Status"}),e(a.TH,{children:"Date"}),e(a.TH,{children:"Actions"})]})}),e(a.Body,{children:u&&u.map((i,l)=>m(a.Row,{children:[e(a.TH,{children:f(()=>++j)}),e(a.TH,{children:f(()=>i.branch.branch_name)}),e(a.TH,{children:f(()=>i.name)}),e(a.TH,{children:f(()=>i.email)}),e(a.TH,{children:e("a",{href:C(i.profile_pic),"data-fancybox":"images",children:e("img",{className:"table-img",src:C(i.profile_pic),alt:""})})}),e(a.TH,{children:f(()=>i.phone)}),e(a.TH,{children:i.is_active?e("span",{className:"cursor-pointer badge badge-success",onClick:()=>x(i,!1),children:"Active"}):e("span",{className:"cursor-pointer badge badge-danger",onClick:()=>x(i,!0),children:"In Active"})}),e(a.TH,{children:f(()=>new Date(i.created_at).toLocaleDateString())}),e(a.TH,{children:e("i",{className:"feather icon-edit cursor-pointer",onClick:()=>L(i)})})]},i.id))})]})}),e(V,{editValue:r,setEditValue:p,modalObj:c(s({},d),{onSubmit:P,isLoading:D})})]})};export{de as default};
