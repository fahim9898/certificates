import{q as o,r as u,c,F as b,j as e}from"./vendor.436bddb5.js";import{o as T,u as H,T as r,B as f,g as n,a as s}from"./index.72f35460.js";import{C as p}from"./Card.50e90fed.js";const P=()=>{let l=o(),m=T+(l.id?"/"+l.id:"");const{data:i,setData:x,loadingDone:h}=H({method:"get",url:m},t=>l.id?[t.data?.branches]:t.data?.branches);return u.exports.useEffect(()=>(r.search.clear(),r.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",9),()=>{r.search.clear()}),[]),c(b,{children:[e(f,{title:"Purchases",links:[{name:"Home",link:"/gym-admin"},{name:"Purchases",link:"/gym-admin/purchases"}]}),e(p,{title:"Purchases",children:c(r,{tableId:".table-brand-staff",loadingDone:h,footerSelect:!0,filter:!0,footer:[{index:3,text:""},{index:4,text:"\u20B9"},{index:5,text:"\u20B9"}],children:[e(r.Header,{children:c(r.Row,{children:[e(r.TH,{children:"Id"}),e(r.TH,{children:"Branch"}),e(r.TH,{children:"Item"}),e(r.TH,{children:"Qty"}),e(r.TH,{children:"Cost Price"}),e(r.TH,{children:"Amount"}),e(r.TH,{children:"Bill"}),e(r.TH,{children:"Note"}),e(r.TH,{children:"Purchase By"}),e(r.TH,{children:"Date"})]})}),e(r.Body,{children:i&&i.map(t=>t.purchase.map((a,d)=>c(r.Row,{children:[e(r.TH,{children:n(()=>a.id)}),e(r.TH,{children:n(()=>t.branch_name)}),e(r.TH,{children:n(()=>a.stock_item.particular)}),e(r.TH,{children:n(()=>a.qty)}),e(r.TH,{children:n(()=>a.amount)}),e(r.TH,{children:n(()=>a.amount*a.qty)}),e(r.TH,{children:e("a",{href:s(a.bill),"data-fancybox":"images",children:e("img",{className:"table-img",src:s(a.bill),alt:""})})}),e(r.TH,{children:n(()=>a.purchase_transaction.note)}),e(r.TH,{children:n(()=>a.purchase_transaction.purchased_by.name)}),e(r.TH,{children:n(()=>new Date(a.created_at).toIndiaDate())})]},a.id)))}),e(r.Footer,{children:c("tr",{children:[e("td",{colSpan:3,className:"text-right",children:"Total"}),e("th",{children:n(()=>i.reduce((t,a)=>(a.purchase.map(d=>{t=Number(d.qty)+t}),t),0))}),e("th",{children:n(()=>i.reduce((t,a)=>(a.purchase.map(d=>{t=Number(d.amount)+t}),t),0))}),e("th",{children:n(()=>i.reduce((t,a)=>(a.purchase.map(d=>{t=Number(d.amount)*Number(d.qty)+t}),t),0))}),e("td",{colSpan:4})]})})]})})]})};export{P as default};
