import{r as d,b as a,j as e,F as g}from"./vendor.abe5e19c.js";import{g as r,a as v,b as p,u as b,T as n,B as y,F as T,q as w,H as _}from"./index.6b6b7103.js";import{C as S}from"./Card.0a56d7c5.js";import{M as B}from"./Modal.395016a9.js";import"./InputLable.a582803e.js";const H=({modalObj:o,editValue:t,setEditValue:c})=>(d.exports.useState({name:"",phone:""}),a(B,{...o,submitButton:"Print",modalWidth:"700px",children:[a("div",{className:"modal-body two-col-grid",children:[a("fieldset",{className:"form-group",children:[e("label",{children:"Customer Name"}),e("input",{type:"text",value:t.x_name,onChange:s=>c({...t,x_name:s.target.value}),className:"form-control",placeholder:"Customer Name",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Customer Phone"}),e("input",{type:"number",value:t.x_phone,onChange:s=>c({...t,x_phone:s.target.value}),className:"form-control",placeholder:"Customer Phone",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Amount"}),e("input",{type:"number",disabled:!0,value:t.amount,className:"form-control",placeholder:"Amount",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Note"}),e("input",{type:"text",disabled:!0,value:t.note,className:"form-control",placeholder:"note",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Transaction By"}),e("input",{type:"text",disabled:!0,value:t.transaction_by?.staff_name,className:"form-control",placeholder:"note",required:!0})]}),a("fieldset",{className:"form-group",children:[e("label",{children:"Transaction Date"}),e("input",{type:"text",disabled:!0,value:new Date(t.created_at).toLocaleDateString(),className:"form-control",placeholder:"note",required:!0})]})]}),e("div",{id:"print-sale",className:"row d-none",children:a("div",{className:"card-body p-2",children:[e("div",{className:"card-header px-0",children:a("div",{className:"row",children:[a("div",{className:"col-md-12 col-lg-7 col-xl-4 mb-50",children:[a("span",{className:"invoice-id font-weight-bold",children:["# Invoice: ",r(()=>t.branch.branch_name)," ",r(()=>t.id)]}),e("span",{})]}),e("div",{className:"col-md-12 col-lg-5 col-xl-8",children:e("div",{className:"d-flex align-items-center justify-content-end justify-content-xs-start",children:a("div",{className:"issue-date pr-2",children:[a("span",{className:"font-weight-bold no-wrap",children:["Issue Date:"," "]}),e("span",{children:new Date().toISOString().split("T")[0]}),"\xA0\xA0",a("span",{className:"font-weight-bold no-wrap",children:["Bill Date:"," "]}),e("span",{children:r(()=>new Date(t.created_at).toISOString().split("T")[0])})]})})})]})}),a("div",{className:"invoice-logo-title row pt-2",children:[e("div",{className:"col-6 d-flex flex-column justify-content-center align-items-start",children:e("h2",{className:"text-primary",children:"Gym Invoice"})}),e("div",{className:"col-6 d-flex justify-content-end invoice-logo",children:e("img",{src:v(r(()=>t.branch.branch_logo)),style:{maxHeight:"50px",objectFit:"cover",marginRight:"20px"}})})]}),e("hr",{}),a("div",{className:"row invoice-adress-info py-2",children:[a("div",{className:"col-6 mt-1 from-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill From"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:r(()=>t.transaction_by.staff_name)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:r(()=>t.transaction_by.contact_no)})})]}),a("div",{className:"col-6 mt-1 to-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill To"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:r(()=>t.x_name)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:r(()=>t.x_phone)})})]})]}),e("div",{className:"product-details-table py-2 table-responsive",children:a("table",{className:"table table-borderless",children:[e("thead",{children:a("tr",{children:[e("th",{scope:"col",children:"Customer"}),e("th",{scope:"col",children:"COST"}),e("th",{scope:"col",children:"NOTE"}),e("th",{scope:"col",children:"PRICE"})]})}),e("tbody",{children:a("tr",{children:[e("td",{children:r(()=>t.member.member_name)}),e("td",{children:r(()=>t.amount)}),e("td",{children:r(()=>t.note)}),e("td",{className:"font-weight-bold",children:r(()=>(t.amount*1).toFixed(2)+" \u20B9")})]})}),e("tfoot",{style:{borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:a("tr",{children:[e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),a("td",{style:{borderBottom:"0px"},className:"font-weight-bold",children:["Total:"," ",r(()=>(t.amount*1).toLocaleString("en-IN")+" \u20B9")]})]})})]})}),e("div",{className:"invoice-total pb-2",children:a("div",{className:"row",children:[e("div",{className:"col-8 col-sm-6 d-flex justify-content-end mt-75",children:e("ul",{className:"list-group cost-list d-none ",children:a("li",{className:"list-group-item each-cost border-0 p-50 d-flex justify-content-between",children:[e("span",{className:"cost-title mr-2",children:"Total "}),e("span",{className:"cost-value",children:r(()=>(t.amount*t.qty).toFixed(2)+" \u20B9")})]})})}),e("div",{className:"col-4 col-sm-6 mt-0",children:e("p",{className:"text-right",children:"Thanks for your business."})})]})})]})})]})),P=()=>{const[o,t]=d.exports.useState({formId:"print-form-edit",modalId:"print-modal-edit",title:"Print Bill"}),[c,s]=d.exports.useState({particular:"",qty:"",rate:"",amount:""}),{isLoading:u,callback:j}=p();p();const{data:i,setData:I,loadingDone:f}=b({method:"get",url:T},"member_transactions"),{data:m,setData:C}=b({method:"get",url:_});d.exports.useEffect(()=>(n.search.clear(),n.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",5),()=>{n.search.clear()}),[]);function N(){w("print-sale"),window.$(`#${o.modalId}`).modal("hide")}function x(l){console.log(i),s({...l,x_name:"",x_phone:"",branch:m?.branch}),window.$(`#${o.modalId}`).modal("show"),window.$(`#${o.formId}`).off("submit")}return a(g,{children:[e(y,{title:"Members Transactions",links:[{name:"Home",link:"/branch-admin"},{name:"Members Transactions",link:"/branch-admin/members-transactions"}]}),e(S,{title:"Members Transactions",children:a(n,{tableId:".table-brand-staff",loadingDone:f,footerSelect:!0,filter:!0,footer:[{index:3,text:"\u20B9"}],children:[e(n.Header,{children:a(n.Row,{children:[e(n.TH,{children:"Id"}),e(n.TH,{children:"Member Name"}),e(n.TH,{children:"Staff Name"}),e(n.TH,{children:"Amount"}),e(n.TH,{children:"Note"}),e(n.TH,{children:"Date"}),e(n.TH,{children:"Actions"})]})}),e(n.Body,{children:i&&m&&i.map((l,h)=>a(n.Row,{children:[e(n.TH,{children:r(()=>l.id)}),e(n.TH,{children:r(()=>l.member.member_name)}),e(n.TH,{children:r(()=>l.transaction_by.staff_name)}),e(n.TH,{children:r(()=>l.amount)}),e(n.TH,{children:r(()=>l.note)}),e(n.TH,{children:r(()=>new Date(l.created_at).toLocaleDateString())}),e(n.TH,{children:a("span",{className:"cursor-pointer badge badge-info",onClick:()=>x(l),children:[e("i",{className:"feather icon-printer"})," Print"]})})]},l.id))}),e(n.Footer,{children:a("tr",{children:[e("td",{colSpan:3,className:"text-right",children:"Total Amount"}),e("th",{children:r(()=>i.reduce((l,h)=>Number(h.amount)+l,0)+" \u20B9")}),e("td",{colSpan:3})]})})]})}),e(H,{editValue:c,setEditValue:s,modalObj:{...o,onSubmit:N,isLoading:u}})]})};export{P as default};
