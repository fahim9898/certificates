import{j as e,c as t,r as m,F as k}from"./vendor.436bddb5.js";import{b as H,u as j,T as a,B as D,g as s,a as S,z as g,C as F}from"./index.72f35460.js";import{C as L}from"./Card.50e90fed.js";import{M as _}from"./Modal.e818ba0e.js";const q=({modalObj:d,editValue:o,setEditValue:l})=>e(_,{...d,modalWidth:"700px",children:t("div",{className:"modal-body two-col-grid",children:[t("fieldset",{className:"form-group",children:[e("label",{children:"Name"}),e("input",{type:"text",value:o.staff_name,onChange:n=>l({...o,staff_name:n.target.value}),className:"form-control",placeholder:"Name",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Type"}),t("select",{className:"form-control drop-icon",value:o.staff_type,onChange:n=>l({...o,staff_type:n.target.value}),children:[e("option",{value:"Manager",children:"Manager"}),e("option",{value:"Trainer",children:"Trainer"}),e("option",{value:"Receptionist",children:"Receptionist"}),e("option",{value:"House Keeper",children:"House Keeper"})]})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Gender"}),t("select",{className:"form-control drop-icon",value:o.gender,onChange:n=>l({...o,gender:n.target.value}),children:[e("option",{value:"0",children:"Male"}),e("option",{value:"1",children:"Female"})]})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Dob"}),e("input",{type:"date",value:o.dob,onChange:n=>l({...o,dob:n.target.value}),className:"form-control",placeholder:"dob",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Aniversary"}),e("input",{type:"date",value:o.aniversary,onChange:n=>l({...o,aniversary:n.target.value}),className:"form-control",placeholder:"Aniversary"})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Contact No"}),e("input",{type:"text",value:o.contact_no,onChange:n=>l({...o,contact_no:n.target.value}),className:"form-control",placeholder:"Contact No",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Address"}),e("input",{type:"text",value:o.address,onChange:n=>l({...o,address:n.target.value}),className:"form-control",placeholder:"Address",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Working Hours"}),e("input",{type:"number",value:o.working_hours,onChange:n=>l({...o,working_hours:n.target.value}),className:"form-control",placeholder:"Working Hours",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Salary Amount "}),e("input",{type:"number",value:o.salary_amount,onChange:n=>l({...o,salary_amount:n.target.value}),className:"form-control",placeholder:"Salary Amount",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:" Profile Picture"}),e("input",{type:"file",id:"member-profile-file-update",accept:"image/*",className:"form-control"})]})]})}),R=({modalObj:d,editValue:o,setEditValue:l})=>e(_,{...d,modalWidth:"700px",children:t("div",{className:"modal-body one-col-grid",children:[t("fieldset",{className:"form-group",children:[e("label",{children:"Amount"}),e("input",{type:"number",value:o.amount,onChange:n=>l({...o,amount:n.target.value}),className:"form-control",placeholder:"Amount",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Note"}),e("input",{type:"text",value:o.note,onChange:n=>l({...o,note:n.target.value}),className:"form-control",placeholder:"Note",required:!0})]})]})}),z=()=>{const[d,o]=m.exports.useState({formId:"staff-member-form-edit",modalId:"staff-member-modal-edit",title:"Edit Staff Member"}),[l,n]=m.exports.useState({formId:"staff-member-form-add-salary",modalId:"staff-member-modal-add-salary",title:"Add Staff Salary"}),{isLoading:b,callback:y}=H(),{isLoading:W,callback:A}=H(),{data:f,setData:v,loadingDone:C}=j({method:"get",url:g},"staff"),[i,N]=m.exports.useState({staff_name:"",profile_pic:"",staff_type:"",gender:"",dob:"",aniversary:"",contact_no:"",address:"",working_hours:"",salary_amount:""}),[u,T]=m.exports.useState({amount:"",note:""});function w(r,c){A({method:"get",url:g+"/"+r.id+"/edit",success:h=>{window.Notify({status:"success",message:h.data.message}),a.fn.updateTableWithId(f,{...r,is_active:c},v,"id")}})}function x(){let r=new FormData;for(var c in i)r.append(c,i[c]);r.delete("profile_pic"),console.log(i.aniversary),(!i.aniversary||i.aniversary=="")&&r.delete("aniversary");let h=document.getElementById("member-profile-file-update");h.files.length&&(console.log("Files Uplod"),r.append("profile_pic",h.files[0])),r.append("_method","patch"),y({method:"post",url:g+"/"+i.id,data:r,headers:{"Content-Type":"multipart/form-data"},success:p=>{window.Notify({status:"success",message:p.data.message}),window.$(`#${d.modalId}`).modal("hide"),a.fn.updateTableWithId(f,p.data.staff,v,"id")},error:p=>{window.$(`#${d.modalId}`).modal("hide")}})}function I(){y({method:"post",url:F,data:{branch_staff_id:u.id,amount:u.amount,note:u.note},success:r=>{window.Notify({status:"success",message:r.data.message}),window.$(`#${l.modalId}`).modal("hide")},error:r=>{window.$(`#${l.modalId}`).modal("hide")}})}function M(r){N(r),window.$(`#${d.modalId}`).modal("show"),window.$(`#${d.formId}`).off("submit"),window.$(`#${d.formId}`).on("submit",function(){o({...d,isLoading:!0})})}function $(r){T({...r,amount:"",note:""}),window.$(`#${l.modalId}`).modal("show"),window.$(`#${l.formId}`).off("submit"),window.$(`#${l.formId}`).on("submit",function(){n({...l,isLoading:!0})})}return m.exports.useEffect(()=>(a.search.clear(),a.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",12),()=>{a.search.clear()}),[]),t(k,{children:[e(D,{title:"Staff Members",links:[{name:"Home",link:"/branch-admin"},{name:"Staff Members",link:"/branch-admin/staff-members"}]}),e(L,{title:"Staff Members",button:{name:"Add",link:"staff-member-add"},children:t(a,{tableId:".table-brand-staff-x",loadingDone:C,footerSelect:!0,filter:!0,children:[e(a.Header,{children:t(a.Row,{children:[e(a.TH,{children:"Id"}),e(a.TH,{children:"Name"}),e(a.TH,{children:"Type"}),e(a.TH,{children:"Profile Pic"}),e(a.TH,{children:"Gender"}),e(a.TH,{children:"Dob"}),e(a.TH,{children:"Aniversary"}),e(a.TH,{children:"Contact No"}),e(a.TH,{children:"Address"}),e(a.TH,{children:"Working Hours"}),e(a.TH,{children:"Salary Amount"}),e(a.TH,{children:"Status"}),e(a.TH,{children:"Date"}),e(a.TH,{children:"Actions"})]})}),e(a.Body,{children:f&&f.map((r,c)=>t(a.Row,{children:[e(a.TH,{children:s(()=>r.id)}),e(a.TH,{children:s(()=>r.staff_name)}),e(a.TH,{children:s(()=>r.staff_type)}),e(a.TH,{children:e("a",{href:S(r.profile_pic),"data-fancybox":"images",children:e("img",{className:"table-img",src:S(r.profile_pic),alt:""})})}),e(a.TH,{children:s(()=>r.gender?"Female":"Male")}),e(a.TH,{children:s(()=>r.dob)}),e(a.TH,{children:s(()=>r.aniversary)}),e(a.TH,{children:s(()=>r.contact_no)}),e(a.TH,{children:s(()=>r.address)}),e(a.TH,{children:s(()=>r.working_hours)}),e(a.TH,{children:s(()=>r.salary_amount)}),e(a.TH,{children:r.is_active?e("span",{className:"cursor-pointer badge badge-success",onClick:()=>w(r,!1),children:"Active"}):e("span",{className:"cursor-pointer badge badge-danger",onClick:()=>w(r,!0),children:"In Active"})}),e(a.TH,{children:s(()=>new Date(r.created_at).toIndiaDate())}),t(a.TH,{children:[e("i",{className:"feather icon-edit cursor-pointer",onClick:()=>M(r)}),t("span",{className:"cursor-pointer badge badge-secondary ml-1",onClick:()=>$(r),children:[e("i",{className:"fa fa-plus"})," Salary"]})]})]},r.id))})]})}),e(q,{editValue:i,setEditValue:N,modalObj:{...d,onSubmit:x,isLoading:b}}),e(R,{editValue:u,setEditValue:T,modalObj:{...l,onSubmit:I,isLoading:b}})]})};export{z as default};
