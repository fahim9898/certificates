import{q as N,c as f,r as w,b as r,F as u,j as e}from"./vendor.abe5e19c.js";import{u as b,G as k,B as v,g as n,v as z}from"./index.e8bf6671.js";const T=()=>{let l=N();const c=f(a=>a.user.currentUser);w.exports.useEffect(()=>{const a=document.createElement("script");a.src="https://checkout.razorpay.com/v1/checkout.js",a.async=!0,document.body.appendChild(a)},[]);function m(a){window.api.get("/api/make-razorpay-order/"+a).then(i=>{let o=i.data.razorpay_response||{},y=i.data.amount;i.data.order_id;var p={key:"rzp_test_Q0N5y5ASSPTTPe",amount:o.amount,currency:o.currency,name:"",description:"",order_id:o.id,handler:function(t){console.log(t);var g={razorpay_signature:t.razorpay_signature,razorpay_order_id:t.razorpay_order_id,razorpay_payment_id:t.razorpay_payment_id,transactionamount:y};window.api.patch("/api/sas_plan_purchase_gym/"+l.id,g).then(d=>{window.Notify({status:"success",message:d.data.message}),setTimeout(()=>{window.location.reload()},2e3)}).catch(d=>{window.Notify({status:"error",message:window.handleError(d)}),setTimeout(()=>{window.location.reload()},2e3)})},prefill:{name:c.name,email:c.email,contact:c.phone},notes:o.notes,theme:{color:"#528ff0"}};console.log(p);var _=new window.Razorpay(p);_.open()})}const{data:h,setData:x,loadingDone:D}=b({method:"get",url:z},"sasplans"),{data:s,setData:A,loadingDone:P}=b({method:"get",url:k+"/"+l.id},"branch");return r(u,{children:[e(v,{title:"Plans",links:[{name:"Home",link:"/gym-admin"},{name:"Plans",link:"/gym-admin/sas-plans"}]}),e("div",{className:"row",children:h&&s&&h.map((a,i)=>e("div",{className:"col-md-4",children:e("div",{className:"card profile-card-with-cover",style:{borderRadius:"7px",backgroundColor:a.id==(s==null?void 0:s.sas_subscription_id)?"rgb(115 244 205)":""},children:e("div",{className:"card-content",children:r("div",{className:"profile-card-with-cover-content text-center",children:[r("div",{className:"profile-details mt-2",children:[e("h4",{className:"card-title",children:n(()=>a.plan_name)}),r("ul",{className:"list-inline clearfix mt-2",children:[r("li",{className:"mr-3",children:[r("h2",{className:"block",children:[n(()=>Number(a.plan_amount).toFixed()),"\u20B9"]}),"Amount"]}),r("li",{className:"mr-3",children:[e("h2",{className:"block",children:n(()=>a.plan_validity_days)}),"Days"]}),r("li",{children:[e("h2",{className:"block",children:n(()=>a.plan_validity_months)}),"Months"]})]})]}),e("div",{className:"card-body",children:a.id==(s==null?void 0:s.sas_subscription_id)?r(u,{children:[r("a",{href:"#",className:"btn btn-social btn-min-width mr-1 mb-1 btn-facebook",style:{backgroundColor:"#16d39a",borderColor:"rgb(115 244 205)"},onClick:()=>m(a.id),children:[e("i",{className:"feather icon-heart"}),e("span",{className:"pr-1",children:"Renew"})]}),e("br",{}),r("span",{className:"plan-remainging-days",children:[n(()=>s.remaining_days),"\xA0Remaining Days"]})]}):r("a",{href:"#",className:"btn btn-social btn-min-width mr-1 mb-1 btn-facebook",style:{backgroundColor:"rgb(93, 112, 147)"},onClick:()=>m(a.id),children:[e("i",{className:"feather icon-check-circle"}),e("span",{className:"pl-0 pr-1",children:"Upgrade"})]})})]})})})},a.id))})]})};export{T as default};
