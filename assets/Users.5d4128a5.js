var H=Object.defineProperty,_=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var b=(s,r,i)=>r in s?H(s,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[r]=i,n=(s,r)=>{for(var i in r||(r={}))y.call(r,i)&&b(s,i,r[i]);if(g)for(var i of g(r))v.call(r,i)&&b(s,i,r[i]);return s},l=(s,r)=>_(s,x(r));import{j as e,b as t,r as u,F as S}from"./vendor.abe5e19c.js";import{u as j,T as a,B as k,a as w}from"./index.945cac23.js";import{C as I}from"./Card.0a56d7c5.js";import{M as C}from"./Modal.395016a9.js";const E=({modalObj:s,editValue:r,setEditValue:i})=>e(C,l(n({},s),{children:t("div",{className:"modal-body two-col-grid",children:[t("fieldset",{className:"form-group",children:[e("label",{children:"Name"}),e("input",{type:"text",value:r.name,onChange:o=>i(l(n({},r),{name:o.target.value})),className:"form-control",placeholder:"Name",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Email"}),e("input",{type:"text",value:r.email,onChange:o=>i(l(n({},r),{email:o.target.value})),className:"form-control",placeholder:"Name",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Phone"}),e("input",{type:"text",value:r.phone,onChange:o=>i(l(n({},r),{phone:o.target.value})),className:"form-control",placeholder:"Name",required:!0})]})]})})),q=()=>{const[s,r]=u.exports.useState({formId:"user-form-edit",modalId:"user-modal-edit",title:"User Edit",isLoading:!1}),[i,o]=u.exports.useState({name:"",email:"",phone:"",profile_pic:""}),{data:c,setData:p,loadingDone:T}=j({method:"get",url:"/api/all_users"},"users");function f(d,h){window.api({method:"patch",url:"/api/all_users/"+d.id,data:{is_active:h}}).then(m=>{window.Notify({status:"success",message:m.data.message}),a.fn.updateTableWithId(c,l(n({},d),{is_active:h}),p,"id")}).catch(m=>{window.Notify({status:"error",message:window.handleError(m)})})}function N(){window.api({method:"post",url:"/api/all_users/"+i.id,data:{name:i.name,phone:i.phone,email:i.email}}).then(d=>{r(l(n({},s),{isLoading:!1})),window.$(`#${s.modalId}`).modal("hide"),a.fn.updateTableWithId(c,i,p,"id")}).catch(d=>{window.Notify({status:"error",message:window.handleError(d)}),r(l(n({},s),{isLoading:!1})),window.$(`#${s.modalId}`).modal("hide")})}return u.exports.useEffect(()=>(a.search.clear(),a.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",7),()=>{a.search.clear()}),[]),t(S,{children:[e(k,{title:"Users",links:[{name:"Home",link:"/super-admin"},{name:"Users",link:"/super-admin/users"}]}),e(I,{title:"Users",button:{name:"Add",link:"user-add"},children:t(a,{loadingDone:T,footerSelect:!0,filter:!0,children:[e(a.Header,{children:t(a.Row,{children:[e(a.TH,{children:"Id"}),e(a.TH,{children:"Name"}),e(a.TH,{children:"Profile"}),e(a.TH,{children:"Email"}),e(a.TH,{children:"Number"}),e(a.TH,{children:"Type"}),e(a.TH,{children:"Status"}),e(a.TH,{children:"Date"})]})}),e(a.Body,{children:c&&c.map((d,h)=>t(a.Row,{children:[e(a.TH,{children:d.id}),e(a.TH,{children:d.name}),e(a.TH,{children:e("a",{href:w(d.profile_pic),"data-fancybox":"images",children:e("img",{className:"table-img",src:w(d.profile_pic),alt:""})})}),e(a.TH,{children:d.email}),e(a.TH,{children:d.phone}),e(a.TH,{children:(()=>{if(d.is_super_admin)return e("span",{className:"badge badge-dark",children:"Super Admin"});if(d.is_branch_admin)return e("span",{className:"badge badge-warning",children:"Branch Admin"});if(d.is_gym_admin)return e("span",{className:"badge badge-secondary",children:"Gym Admin"})})()}),e(a.TH,{children:d.is_active?e("span",{className:"cursor-pointer badge badge-success",onClick:()=>f(d,!1),children:"Active"}):e("span",{className:"cursor-pointer badge badge-danger",onClick:()=>f(d,!0),children:"In Active"})}),e(a.TH,{children:new Date(d.created_at).toLocaleDateString()})]},d.id))})]})}),e(E,{editValue:i,setEditValue:o,modalObj:l(n({},s),{onSubmit:N})})]})};export{q as default};
