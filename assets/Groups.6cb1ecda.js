import{r as h,j as e,b as n,F as S}from"./vendor.61ffbfff.js";import{u as _,z as v,b as H,T as t,B as w,g as l,D as N}from"./index.720694af.js";import{C as I}from"./Card.a57d113a.js";import{M as D}from"./Modal.d8f45e11.js";import{I as C}from"./InputLable.103d759b.js";const G=({modalObj:s,editValue:a,setEditValue:d})=>{function c(r,o){let u=r,p=o;if(u.split(":")[0]<=p.split(":")[0])return!0;if(u&&p)return window.Notify({status:"error",message:"Please Select Appropriate Start Time and End Time"}),!1}h.exports.useEffect(()=>{let r=a.start_time,o=a.end_time;r&&o&&d({...a,group_timmings_hours:o.split(":")[0]-r.split(":")[0]})},[a.start_time,a.end_time]);const{data:m,setData:g,loadingDone:b}=_({method:"get",url:v},"staff");return e(D,{...s,modalWidth:"700px",children:n("div",{className:"modal-body two-col-grid",children:[n("fieldset",{className:"form-group",children:[e("label",{children:"Group Name"}),e("input",{type:"text",value:a.name,onChange:r=>d({...a,name:r.target.value}),className:"form-control",placeholder:"Group Name",required:!0})]}),n("fieldset",{className:"form-group",children:[e("label",{children:" Trainer Information"}),n(C.LabelSelect,{value:a.group_trainer_id,required:!0,label:"Trainer",onChange:r=>{console.log("called");const o=JSON.parse(r.target[r.target.selectedIndex].getAttribute("trainer"));d({...a,group_trainer_id:r.target.value,trainer:o})},invalidText:"Need to select Trainer",children:[e("option",{value:"",children:"Select Trainer"}),m&&m.map(r=>(()=>{if(r.staff_type=="Trainer")return e("option",{value:r.id,trainer:`${JSON.stringify(r)}`,children:r.staff_name},r.id)})())]})]}),n("fieldset",{className:"form-group",children:[e("label",{children:"Start Time"}),e("input",{type:"time",value:a.start_time,onChange:r=>{c(r.target.value,a.end_time)&&d({...a,start_time:r.target.value})},required:!0,className:"form-control",placeholder:"Start Time"})]}),n("fieldset",{className:"form-group",children:[e("label",{children:"End Time"}),e("input",{type:"time",value:a.end_time,onChange:r=>{c(a.start_time,r.target.value)&&d({...a,end_time:r.target.value})},required:!0,className:"form-control",placeholder:"End Time"})]}),n("fieldset",{className:"form-group",children:[e("label",{children:"Group Hours"}),e("input",{type:"text",value:a.group_timmings_hours,onChange:r=>d({...a,group_timmings_hours:r.target.value}),required:!0,disabled:!0,className:"form-control",placeholder:"Group Hours"})]})]})})},M=()=>{const[s,a]=h.exports.useState({formId:"group-form-edit",modalId:"group-modal-edit",title:"Edit Member"}),{isLoading:d,callback:c}=H();H();const{data:m,setData:g,loadingDone:b}=_({method:"get",url:N},"groups"),[r,o]=h.exports.useState({group_trainer_id:"",group_timmings_hours:"",start_time:"",end_time:"",name:""});function u(){let i=new FormData;for(var f in r)i.append(f,r[f]);i.append("_method","patch"),c({method:"post",url:N+"/"+r.id,data:i,headers:{"Content-Type":"multipart/form-data"},success:T=>{window.Notify({status:"success",message:T.data.message}),window.$(`#${s.modalId}`).modal("hide");let x={...r};t.fn.updateTableWithId(m,x,g,"id")},error:T=>{window.$(`#${s.modalId}`).modal("hide")}})}function p(i){o(i),window.$(`#${s.modalId}`).modal("show"),window.$(`#${s.formId}`).off("submit")}return h.exports.useEffect(()=>(t.search.clear(),t.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",6),()=>{t.search.clear()}),[]),n(S,{children:[e(w,{title:"Groups",links:[{name:"Home",link:"/branch-admin"},{name:"Groups",link:"/branch-admin/groups"}]}),e(I,{title:"Groups",button:{name:"Add",link:"group-add"},children:n(t,{tableId:".table-brand-staff",loadingDone:b,footerSelect:!0,filter:!0,children:[e(t.Header,{children:n(t.Row,{children:[e(t.TH,{children:"Id"}),e(t.TH,{children:"Name"}),e(t.TH,{children:"Trainer"}),e(t.TH,{children:"Group Hours"}),e(t.TH,{children:"Start Time"}),e(t.TH,{children:"End Time"}),e(t.TH,{children:"Date"}),e(t.TH,{children:"Actions"})]})}),e(t.Body,{children:m&&m.map((i,f)=>n(t.Row,{children:[e(t.TH,{children:l(()=>i.id)}),e(t.TH,{children:l(()=>i.name)}),e(t.TH,{children:l(()=>i.trainer.staff_name)}),e(t.TH,{children:l(()=>i.group_timmings_hours)}),e(t.TH,{children:l(()=>i.start_time)}),e(t.TH,{children:l(()=>i.end_time)}),e(t.TH,{children:l(()=>new Date(i.created_at).toLocaleDateString())}),e(t.TH,{children:e("i",{className:"feather icon-edit cursor-pointer",onClick:()=>p(i)})})]},i.id))})]})}),e(G,{editValue:r,setEditValue:o,modalObj:{...s,onSubmit:u,isLoading:d}})]})};export{M as default};
