var S=Object.defineProperty,j=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var N=(t,r,d)=>r in t?S(t,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[r]=d,s=(t,r)=>{for(var d in r||(r={}))D.call(r,d)&&N(t,d,r[d]);if(H)for(var d of H(r))L.call(r,d)&&N(t,d,r[d]);return t},c=(t,r)=>j(t,B(r));import{j as e,b as i,r as y,F as k,L as E}from"./vendor.abe5e19c.js";import{u as q,b as R,B as F,T as a,a as _,r as O,t as P}from"./index.e8bf6671.js";import{C as G}from"./Card.0a56d7c5.js";import{M as W}from"./Modal.395016a9.js";import"./InputLable.a582803e.js";const Y=({modalObj:t,editValue:r,setEditValue:d})=>{function o(l){const{name:m,value:h}=l.target;d(c(s({},r),{[m]:h}))}return e(W,c(s({},t),{modalWidth:"700px",children:i("div",{className:"modal-body two-col-grid",children:[i("fieldset",{className:"form-group",children:[e("label",{children:"Name"}),e("input",{type:"text",name:"branch_name",value:r.branch_name,onChange:l=>o(l),className:"form-control",placeholder:"Name",required:!0})]}),i("fieldset",{className:"form-group",children:[e("label",{children:"Address"}),e("input",{type:"text",name:"branch_address",value:r.branch_address,onChange:l=>o(l),className:"form-control",placeholder:"Address",required:!0})]}),i("fieldset",{className:"form-group",children:[e("label",{children:"City"}),e("input",{type:"text",name:"city",value:r.city,onChange:l=>o(l),className:"form-control",placeholder:"City",required:!0})]}),i("fieldset",{className:"form-group",children:[e("label",{children:"State"}),e("input",{type:"text",name:"state",value:r.state,onChange:l=>o(l),className:"form-control",placeholder:"State",required:!0})]}),i("fieldset",{className:"form-group",children:[e("label",{children:"Phone"}),e("input",{type:"number",name:"phone",value:r.phone,onChange:l=>o(l),className:"form-control",placeholder:"Phone",required:!0})]}),i("fieldset",{className:"form-group",children:[e("label",{children:"Branch Logo"}),e("input",{type:"file",accept:"image/*",name:"profile_pic",id:"admin-profile-pic",className:"form-control"})]})]})}))},Z=()=>{const[t,r]=y.exports.useState({formId:"branch-form-edit",modalId:"branch-modal-edit",title:"Edit Branch"}),[d,o]=y.exports.useState({branch_name:"",branch_address:"",city:"",state:"",phone:""}),{data:l,setData:m,loadingDone:h}=q({method:"get",url:O},"branches"),{isLoading:w,callback:x}=R(),C="Branches",I=[{name:"Home",link:"/gym-admin/"},{name:"Branches",link:"/gym-admin/branches"}];function A(n){o(n),window.$(`#${t.modalId}`).modal("show"),window.$(`#${t.formId}`).off("submit")}function v(){var g;let n=new FormData;for(var p in d)n.append(p,d[p]);let f=(g=$('#branch-form-edit input[type="file"]')[0])==null?void 0:g.files[0];n.delete("branch_logo"),f&&n.append("branch_logo",f),n.append("_method","patch"),x({method:"post",url:P+"/"+d.id,data:n,headers:{"Content-Type":"multipart/form-data"},success:u=>{var b,T;window.Notify({status:"success",message:u.data.message}),window.$(`#${t.modalId}`).modal("hide");let M=c(s({},d),{branch_logo:(T=(b=u.data)==null?void 0:b.branch)==null?void 0:T.branch_logo});a.fn.updateTableWithId(l,M,m,"id")},error:u=>{window.$(`#${t.modalId}`).modal("hide")}})}return i(k,{children:[e(F,{title:C,links:I}),e(G,{title:"Branches",button:{name:"Add",link:"branch-add"},children:i(a,{loadingDone:h,footerSelect:!0,children:[e(a.Header,{children:i(a.Row,{children:[e(a.TH,{children:"Id"}),e(a.TH,{children:"Name"}),e(a.TH,{children:"Logo"}),e(a.TH,{children:"Address"}),e(a.TH,{children:"City"}),e(a.TH,{children:"State"}),e(a.TH,{children:"Phone"}),e(a.TH,{children:"Start Date"}),e(a.TH,{children:"End Date"}),e(a.TH,{children:"Remaining Days"}),e(a.TH,{children:"Status"}),e(a.TH,{children:"Actions"})]})}),e(a.Body,{children:l&&l.map((n,p)=>i(a.Row,{children:[e(a.TH,{children:n.id}),e(a.TH,{children:n.branch_name}),e(a.TH,{children:e("a",{href:_(n.branch_logo),"data-fancybox":"images",children:e("img",{className:"table-img",src:_(n.branch_logo),alt:""})})}),e(a.TH,{children:n.branch_address}),e(a.TH,{children:n.city}),e(a.TH,{children:n.state}),e(a.TH,{children:n.phone}),e(a.TH,{children:n.start_date}),e(a.TH,{children:n.end_date}),e(a.TH,{children:n.remaining_days}),e(a.TH,{children:n.is_active?e("span",{className:"badge badge-success",children:"Active"}):e("span",{className:"badge badge-danger",children:"In Active"})}),i(a.TH,{children:[e("i",{className:"feather icon-edit cursor-pointer mr-1",onClick:()=>A(n)}),e(E,{to:"/gym-admin/branches/"+n.id,children:i("span",{className:"badge badge-info",children:[e("i",{className:"feather icon-eye"})," View"]})})]})]},n.id))})]})}),e(Y,{editValue:d,setEditValue:o,modalObj:c(s({},t),{onSubmit:v,isLoading:w})})]})};export{Z as default};
