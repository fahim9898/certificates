var x=Object.defineProperty,A=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var h=(n,r,i)=>r in n?x(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,o=(n,r)=>{for(var i in r||(r={}))y.call(r,i)&&h(n,i,r[i]);if(g)for(var i of g(r))C.call(r,i)&&h(n,i,r[i]);return n},l=(n,r)=>A(n,G(r));import{d as S,r as v,b as d,F as L,j as a}from"./vendor.abe5e19c.js";import{u as q,b as w,B as D,z as I,D as j}from"./index.945cac23.js";import{C as k}from"./Card.0a56d7c5.js";import{F,I as c}from"./InputLable.a582803e.js";const z=()=>{const n="Add Group",r=[{name:"Home",link:"/branch-admin"},{name:"Groups",link:"/branch-admin/groups"},{name:"Add Group",link:"/branch-admin/group-add"}];let i=S();const{data:b,setData:H,loadingDone:E}=q({method:"get",url:I},"staff"),{isLoading:_,callback:N}=w(),[t,m]=v.exports.useState({group_trainer_id:"",group_timmings_hours:"",start_time:"",end_time:"",name:""});function f(e,s){let u=e,p=s;if(u==""||p==""||u.split(":")[0]<=p.split(":")[0])return!0;if(u&&p)return window.Notify({status:"error",message:"Please Select Appropriate Start Time and End Time"}),!1}v.exports.useEffect(()=>{let e=t.start_time,s=t.end_time;e&&s&&m(l(o({},t),{group_timmings_hours:s.split(":")[0]-e.split(":")[0]}))},[t.start_time,t.end_time]);const T=function(){let e=new FormData;for(var s in t)e.append(s,t[s]);N({method:"post",url:j,data:t,success:u=>{window.Notify({message:u.data.message,status:"success"}),i.push("/branch-admin/groups")}})};return d(L,{children:[a(D,{title:n,links:r}),a(F,{id:"form-member-plan-validation",onSubmit:e=>{e.preventDefault(),window.formValidate("form-member-plan-validation")(T)},children:d("div",{className:"row",children:[a("div",{className:"col-md-8",children:d(k,{title:"Group Information",iconLeft:"feather icon-box",children:[a(c.LabelInput,{className:"form-control",type:"text",required:!0,value:t.name,onChange:e=>m(l(o({},t),{name:e.target.value})),label:"Group Name",invalidText:"Group Name is required"}),d(c.LabelSelect,{value:t.group_trainer_id,required:!0,label:"Trainer",onChange:e=>{console.log("called"),JSON.parse(e.target[e.target.selectedIndex].getAttribute("trainer")),m(l(o({},t),{group_trainer_id:e.target.value}))},invalidText:"Need to select Trainer",children:[a("option",{value:"",children:"Select Trainer"}),b&&b.filter(e=>e.is_active).map(e=>(()=>{if(e.staff_type=="Trainer")return a("option",{value:e.id,children:e.staff_name},e.id)})())]}),d("div",{className:"row",children:[a("div",{className:"col-md-6",children:a(c.LabelInput,{className:"form-control",type:"time",required:!0,value:t.start_time,onChange:e=>{f(e.target.value,t.end_time)&&m(l(o({},t),{start_time:e.target.value}))},label:"Start Time",invalidText:"Start Time is required"})}),a("div",{className:"col-md-6",children:a(c.LabelInput,{className:"form-control",type:"time",required:!0,value:t.end_time,onChange:e=>{f(t.start_time,e.target.value)&&m(l(o({},t),{end_time:e.target.value}))},label:"End Time",invalidText:"End Time is required"})})]}),a(c.LabelInput,{className:"form-control",type:"text",required:!0,disabled:!0,value:t.group_timmings_hours,onChange:e=>m(l(o({},t),{group_timmings_hours:e.target.value})),label:"Group Hours",invalidText:"Group Hours is required"})]})}),a("div",{className:"col-md-4"}),a("div",{className:"col-md-2",children:_?d("div",{className:"mb-4 btn btn-primary btn-lg btn-block",children:[a("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"\xA0 Loading..."]}):d("button",{type:"submit",className:"mb-4 btn btn-primary btn-lg btn-block",children:[a("i",{className:"feather icon-plus"})," Add Group"]})})]})})]})};export{z as default};
