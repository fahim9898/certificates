import{c as y,r as _,b as r,F as h,j as e}from"./vendor.abe5e19c.js";import{u as N,B as g,g as n,I as f}from"./index.6b6b7103.js";const A=()=>{const i=y(a=>a.user.currentUser);_.exports.useEffect(()=>{const a=document.createElement("script");a.src="https://checkout.razorpay.com/v1/checkout.js",a.async=!0,document.body.appendChild(a)},[]);function l(a){console.log(i),window.api.get("/api/make-razorpay-order/"+a).then(o=>{let c=o.data.razorpay_response||{},p=o.data.amount;o.data.order_id;var m={key:"rzp_test_Q0N5y5ASSPTTPe",amount:c.amount,currency:c.currency,name:"",description:"",order_id:c.id,handler:function(t){console.log(t);var b={razorpay_signature:t.razorpay_signature,razorpay_order_id:t.razorpay_order_id,razorpay_payment_id:t.razorpay_payment_id,transactionamount:p};window.api.post("/api/sas_plan_purchase",b).then(d=>{window.Notify({status:"success",message:d.data.message}),setTimeout(()=>{window.location.reload()},2e3)}).catch(d=>{window.Notify({status:"error",message:window.handleError(d)}),setTimeout(()=>{window.location.reload()},2e3)})},prefill:{name:i.name,email:i.email,contact:i.phone},notes:c.notes,theme:{color:"#528ff0"}};console.log(m);var u=new window.Razorpay(m);u.open()})}const{data:s,setData:w,loadingDone:k}=N({method:"get",url:f});return r(h,{children:[e(g,{title:"Plans",links:[{name:"Home",link:"/branch-admin"},{name:"Plans",link:"/branch-admin/sas-plans"}]}),e("div",{className:"row",children:s&&s.sas_subscription&&s.sas_subscription.map((a,o)=>e("div",{className:"col-md-4",children:e("div",{className:"card profile-card-with-cover",style:{borderRadius:"7px",backgroundColor:a.id==s?.branch.sas_subscription_id?"rgb(115 244 205)":""},children:e("div",{className:"card-content",children:r("div",{className:"profile-card-with-cover-content text-center",children:[r("div",{className:"profile-details mt-2",children:[e("h4",{className:"card-title",children:n(()=>a.plan_name)}),r("ul",{className:"list-inline clearfix mt-2",children:[r("li",{className:"mr-3",children:[r("h2",{className:"block",children:[n(()=>Number(a.plan_amount).toFixed()),"\u20B9"]}),"Amount"]}),r("li",{className:"mr-3",children:[e("h2",{className:"block",children:n(()=>a.plan_validity_days)}),"Days"]}),r("li",{children:[e("h2",{className:"block",children:n(()=>a.plan_validity_months)}),"Months"]})]})]}),e("div",{className:"card-body",children:a.id==s?.branch?.sas_subscription_id?r(h,{children:[r("a",{href:"#",className:"btn btn-social btn-min-width mr-1 mb-1 btn-facebook",style:{backgroundColor:"#16d39a",borderColor:"rgb(115 244 205)"},onClick:()=>l(a.id),children:[e("i",{className:"feather icon-heart"}),e("span",{className:"pr-1",children:"Renew"})]}),e("br",{}),r("span",{className:"plan-remainging-days",children:[n(()=>s.branch.remaining_days),"\xA0Remaining Days"]})]}):r("a",{href:"#",className:"btn btn-social btn-min-width mr-1 mb-1 btn-facebook",style:{backgroundColor:"rgb(93, 112, 147)"},onClick:()=>l(a.id),children:[e("i",{className:"feather icon-check-circle"}),e("span",{className:"pl-0 pr-1",children:"Upgrade"})]})})]})})})},a.id))})]})};export{A as default};
