var H=Object.defineProperty,B=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var f=(c,a,o)=>a in c?H(c,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[a]=o,s=(c,a)=>{for(var o in a||(a={}))j.call(a,o)&&f(c,o,a[o]);if(N)for(var o of N(a))k.call(a,o)&&f(c,o,a[o]);return c},d=(c,a)=>B(c,I(a));import{r as u,b as t,j as e,F as q}from"./vendor.abe5e19c.js";import{g as n,a as C,T as l,b as x,u as y,B as D,H as g,q as A}from"./index.e8bf6671.js";import{C as P}from"./Card.0a56d7c5.js";import{M as L}from"./Modal.395016a9.js";import"./InputLable.a582803e.js";const F=({modalObj:c,editValue:a,setEditValue:o})=>{var m;return u.exports.useState({name:"",phone:""}),t(L,d(s({},c),{submitButton:"Print",modalWidth:"700px",children:[t("div",{className:"modal-body two-col-grid",children:[t("fieldset",{className:"form-group",children:[e("label",{children:"Customer Name"}),e("input",{type:"text",value:a.x_name,onChange:h=>o(d(s({},a),{x_name:h.target.value})),className:"form-control",placeholder:"Customer Name"})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Customer Phone"}),e("input",{type:"number",value:a.x_phone,onChange:h=>o(d(s({},a),{x_phone:h.target.value})),className:"form-control",placeholder:"Customer Phone"})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Item Name"}),e("input",{type:"text",disabled:!0,value:(m=a.stock_item)==null?void 0:m.particular,className:"form-control",placeholder:"Item Name",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Qty"}),e("input",{type:"number",disabled:!0,value:a.qty,className:"form-control",placeholder:"Qty",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Rate"}),e("input",{type:"number",disabled:!0,value:a.rate,className:"form-control",placeholder:"Rate",required:!0})]}),t("fieldset",{className:"form-group",children:[e("label",{children:"Amount"}),e("input",{type:"number",disabled:!0,value:a.amount,className:"form-control",placeholder:"Amount",required:!0})]})]}),e("div",{id:"print-sale",className:"row d-none",children:t("div",{className:"card-body p-2",children:[e("div",{className:"card-header px-0",children:t("div",{className:"row",children:[t("div",{className:"col-md-12 col-lg-7 col-xl-4 mb-50",children:[t("span",{className:"invoice-id font-weight-bold",children:["# Invoice: ",n(()=>a.branch.branch_name)," ",n(()=>a.id)]}),e("span",{})]}),e("div",{className:"col-md-12 col-lg-5 col-xl-8",children:e("div",{className:"d-flex align-items-center justify-content-end justify-content-xs-start",children:t("div",{className:"issue-date pr-2",children:[t("span",{className:"font-weight-bold no-wrap",children:["Issue Date:"," "]}),e("span",{children:new Date().toISOString().split("T")[0]}),"\xA0\xA0",t("span",{className:"font-weight-bold no-wrap",children:["Bill Date:"," "]}),e("span",{children:n(()=>new Date(a.created_at).toISOString().split("T")[0])})]})})})]})}),t("div",{className:"invoice-logo-title row pt-2",children:[e("div",{className:"col-6 d-flex flex-column justify-content-center align-items-start",children:e("h2",{className:"text-primary",children:"Gym Invoice"})}),e("div",{className:"col-6 d-flex justify-content-end invoice-logo",children:e("img",{src:C(n(()=>a.branch.branch_logo)),alt:"company-logo",style:{maxHeight:"50px",objectFit:"cover",marginRight:"20px"}})})]}),e("hr",{}),t("div",{className:"row invoice-adress-info py-2",children:[t("div",{className:"col-6 mt-1 from-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill From"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:n(()=>a.sale_transaction.sold_by.name)})}),e("div",{className:"company-email  mb-1 mb-1",children:e("span",{className:"text-muted",children:n(()=>a.sale_transaction.sold_by.email)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:n(()=>a.sale_transaction.sold_by.phone)})})]}),t("div",{className:"col-6 mt-1 to-info",children:[e("div",{className:"info-title mb-1",children:e("span",{children:"Bill To"})}),e("div",{className:"company-name mb-1",children:e("span",{className:"text-muted",children:n(()=>a.x_name)})}),e("div",{className:"company-phone  mb-1",children:e("span",{className:"text-muted",children:n(()=>a.x_phone)})})]})]}),e("div",{className:"product-details-table py-2 table-responsive",children:t("table",{className:"table table-borderless",children:[e("thead",{children:t("tr",{children:[e("th",{scope:"col",children:"ITEM"}),e("th",{scope:"col",children:"COST"}),e("th",{scope:"col",children:"QTY"}),e("th",{scope:"col",children:"PRICE"})]})}),e("tbody",{children:t("tr",{children:[e("td",{children:n(()=>a.stock_item.particular)}),e("td",{children:n(()=>a.amount)}),e("td",{children:n(()=>a.qty)}),e("td",{className:"font-weight-bold",children:n(()=>(a.amount*a.qty).toFixed(2)+" \u20B9")})]})}),e("tfoot",{style:{borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:t("tr",{children:[e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),e("td",{style:{borderBottom:"0px"}}),t("td",{style:{borderBottom:"0px"},className:"font-weight-bold",children:["Total:"," ",n(()=>(a.amount*a.qty).toLocaleString("en-IN")+" \u20B9")]})]})})]})}),e("div",{className:"invoice-total pb-2",children:t("div",{className:"row",children:[e("div",{className:"col-8 col-sm-6 d-flex justify-content-end mt-75",children:e("ul",{className:"list-group cost-list d-none ",children:t("li",{className:"list-group-item each-cost border-0 p-50 d-flex justify-content-between",children:[e("span",{className:"cost-title mr-2",children:"Total "}),e("span",{className:"cost-value",children:n(()=>(a.amount*a.qty).toFixed(2)+" \u20B9")})]})})}),e("div",{className:"col-4 col-sm-6 mt-0",children:e("p",{className:"text-right",children:"Thanks for your business."})})]})})]})})]}))},Y=()=>{const[c,a]=u.exports.useState({formId:"print-form-edit",modalId:"print-modal-edit",title:"Print Bill"}),[o,m]=u.exports.useState({particular:"",qty:"",rate:"",amount:""});u.exports.useEffect(()=>(l.search.clear(),l.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",7),()=>{l.search.clear()}),[]);const{isLoading:h,callback:M}=x();x();const{data:p,setData:R,loadingDone:v}=y({method:"get",url:g},"sales"),{data:b,setData:E}=y({method:"get",url:g}),T="Sales",S=[{name:"Home",link:"/branch-admin"},{name:"Sales",link:"/branch-admin/stock-sales"}];function w(r){m(d(s({},r),{x_name:"",x_phone:"",branch:b==null?void 0:b.branch})),window.$(`#${c.modalId}`).modal("show"),window.$(`#${c.formId}`).off("submit")}function _(){A("print-sale"),window.$(`#${c.modalId}`).modal("hide")}return t(q,{children:[e(D,{title:T,links:S}),e(P,{title:"Sales",button:{name:"Sale Stock",link:"/branch-admin/stock-sale-add"},children:t(l,{tableId:".table-brand-staff",loadingDone:v,footerSelect:!0,filter:!0,footer:[{index:2,text:""},{index:3,text:"\u20B9"},{index:4,text:"\u20B9"}],children:[e(l.Header,{children:t(l.Row,{children:[e(l.TH,{children:"Id"}),e(l.TH,{children:"Name"}),e(l.TH,{children:"Qty"}),e(l.TH,{children:"Selling Price"}),e(l.TH,{children:"Amount"}),e(l.TH,{children:"Note"}),e(l.TH,{children:"Sold By"}),e(l.TH,{children:"Date"}),e(l.TH,{children:"Actions"})]})}),e(l.Body,{children:p&&p.map((r,i)=>t(l.Row,{children:[e(l.TH,{children:n(()=>r.id)}),e(l.TH,{children:n(()=>r.stock_item.particular)}),e(l.TH,{children:n(()=>r.qty)}),e(l.TH,{children:n(()=>r.amount)}),e(l.TH,{children:n(()=>r.amount*r.qty)}),e(l.TH,{children:n(()=>r.sale_transaction.note)}),e(l.TH,{children:n(()=>r.sale_transaction.sold_by.name)}),e(l.TH,{children:n(()=>new Date(r.created_at).toLocaleDateString())}),e(l.TH,{children:t("span",{className:"cursor-pointer badge badge-info",onClick:()=>w(r),children:[e("i",{className:"feather icon-printer"})," Print"]})})]},r.id))}),e(l.Footer,{children:t("tr",{children:[e("td",{colSpan:2,className:"text-right",children:"Total"}),e("th",{children:n(()=>p.reduce((r,i)=>Number(i.qty)+r,0))}),e("th",{children:n(()=>p.reduce((r,i)=>Number(i.amount)+r,0)+" \u20B9")}),e("th",{children:n(()=>p.reduce((r,i)=>Number(i.amount)*Number(i.qty)+r,0)+" \u20B9")}),e("td",{colSpan:4})]})})]})}),e(F,{editValue:o,setEditValue:m,modalObj:d(s({},c),{onSubmit:_,isLoading:h})})]})};export{Y as default};
