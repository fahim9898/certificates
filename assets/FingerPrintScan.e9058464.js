import{r as a,j as g,F as d}from"./vendor.abe5e19c.js";const D=({scanComplete:p=x=>{},type:S="staff_user",users:s=[],quality:E=55,timeout:F=10,frequency:h=15,spinning:N=!1,...y})=>{const[x,r]=a.exports.useState(!1),[I,u]=a.exports.useState(0),[R,f]=a.exports.useState("Scan");let t=!1;a.exports.useEffect(()=>(m(),()=>{t=!0}),[]);let n=async function(){let e=[];if(t)return;console.log("SCAN TAKE TIME: ",Date.now());let o=await CaptureFinger(E,F);if(!o.httpStaus&&!o.data.ErrorCode=="0")e.push(o),u((e.length/h*100).toFixed(0));else{window.Notify({message:o.data.ErrorDescription,status:"error"}),setTimeout(()=>{n()},8e3);return}for(let i in s){console.log(s[i],"USER ID");for(let c=0;c<3;c++){let l=await VerifyFinger(s[i][S]["iso"+(c+1)],e[0].data.IsoTemplate);if(l.httpStaus&&l.data.ErrorCode=="0"&&l.data.Status){console.log("FINGER PRINT MATCHED"),w(s[i]);return}}}console.log("NO USER FOUND"),n()};async function T(){t=!1;try{n()}catch(e){t=!0,console.log(e),window.Notify({message:e,status:"error"}),C()}}const m=()=>{r(!0),u(0),setTimeout(()=>{T()},0)},w=e=>{f("Rescan"),r(!1),p(e),n()},C=()=>{t=!0,f("Rescan"),console.log("Clicked cancel button",t),r(!1)};return g(d,{children:g(d,{})})};export{D as F};
