var N=Object.defineProperty,S=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var v=(d,e,i)=>e in d?N(d,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[e]=i,s=(d,e)=>{for(var i in e||(e={}))M.call(e,i)&&v(d,i,e[i]);if(g)for(var i of g(e))P.call(e,i)&&v(d,i,e[i]);return d},o=(d,e)=>S(d,H(e));import{j as a,b as r,r as y,F as A}from"./vendor.abe5e19c.js";import{b as D,T as t,u as k,B as C,e as m}from"./index.6b6b7103.js";import{C as I}from"./Card.0a56d7c5.js";import{M as $}from"./Modal.395016a9.js";const j=({modalObj:d,editValue:e,setEditValue:i})=>a($,o(s({},d),{children:r("div",{className:"modal-body two-col-grid",children:[r("fieldset",{className:"form-group",children:[a("label",{children:"Plan Name"}),a("input",{type:"text",value:e.plan_name,onChange:l=>i(o(s({},e),{plan_name:l.target.value})),className:"form-control",placeholder:"Plan Name",required:!0})]}),r("fieldset",{className:"form-group",children:[a("label",{children:"Plan Amount"}),a("input",{type:"text",value:e.plan_amount,onChange:l=>i(o(s({},e),{plan_amount:l.target.value})),className:"form-control",placeholder:"Plan Amount",required:!0})]}),r("fieldset",{className:"form-group",children:[a("label",{children:"Plan Validity Days"}),a("input",{type:"text",value:e.plan_validity_days,onChange:l=>i(o(s({},e),{plan_validity_days:l.target.value})),className:"form-control",placeholder:"Plan Validity Days",required:!0})]}),r("fieldset",{className:"form-group",children:[a("label",{children:"Plan Validity Months"}),a("input",{type:"text",value:e.plan_validity_months,onChange:l=>i(o(s({},e),{plan_validity_months:l.target.value})),className:"form-control",placeholder:"Plan Validity Months",required:!0})]})]})})),V=()=>{const{callback:d}=D();y.exports.useEffect(()=>{t.search.clear(),t.search.push([{id:"#sas-amount-min",type:"text",placeholder:"Min Amount"},{id:"#sas-amount-max",type:"text",placeholder:"Max Amount"}],"input-search","minmax",2),t.search.push([{id:"#sas-validity-day-min",type:"text",placeholder:"Min Validity Days"},{id:"#sas-validity-day-max",type:"text",placeholder:"Max Validity Days"}],"input-search","minmax",3),t.search.push([{id:"#sas-validity-month-min",type:"text",placeholder:"Min Validity Months"},{id:"#sas-validity-month-max",type:"text",placeholder:"Max Validity Months"}],"input-search","minmax",4),t.search.push([{id:"#date-min",type:"date",placeholder:"Start Date"},{id:"#date-max",type:"date",placeholder:"End Date"}],"input-date","date-minmax",6)},[]);const[e,i]=y.exports.useState({formId:"sas-plan-form-edit",modalId:"sas-plan-modal-edit",title:"Sas Plan Edit",isLoading:!1}),[l,f]=y.exports.useState({plan_name:"",plan_amount:"",plan_validity_days:"",plan_validity_months:""}),{data:c,setData:_,loadingDone:w}=k({method:"get",url:m},"sas_subscriptions");function x(n,h){let p={};h?p={method:"get",url:m+"/"+n.id}:p={method:"post",url:m+"/"+n.id,data:{_method:"delete"}},d(o(s({},p),{success:function(u){window.Notify({status:"success",message:u.data.message}),t.fn.updateTableWithId(c,o(s({},n),{is_active:h}),_,"id")},error:function(u){window.Notify({status:"error",message:window.handleError(u)})}}))}function b(){window.api({method:"post",url:m+"/"+l.id,data:{plan_name:l.plan_name,plan_amount:l.plan_amount,plan_validity_days:l.plan_validity_days,plan_validity_months:l.plan_validity_months,_method:"patch"}}).then(n=>{window.Notify({status:"success",message:n.data.message}),i(o(s({},e),{isLoading:!1})),window.$(`#${e.modalId}`).modal("hide"),t.fn.updateTableWithId(c,l,_,"id")}).catch(n=>{window.Notify({status:"error",message:window.handleError(n)}),i(o(s({},e),{isLoading:!1})),window.$(`#${e.modalId}`).modal("hide")})}function T(n){f(n),window.$(`#${e.modalId}`).modal("show"),window.$(`#${e.formId}`).off("submit"),window.$(`#${e.formId}`).on("submit",function(){i(o(s({},e),{isLoading:!0}))})}return r(A,{children:[a(C,{title:"Sas Plans",links:[{name:"Home",link:"/super-admin"},{name:"Sas Plans",link:"/super-admin/sas-plans"}]}),a(I,{title:"Sas Plans",button:{name:"Add",link:"sas-plan-add"},children:r(t,{loadingDone:w,footerSelect:!0,filter:!0,footer:[{index:2,text:"\u20B9"}],children:[a(t.Header,{children:r(t.Row,{children:[a(t.TH,{children:"Id"}),a(t.TH,{children:"Name"}),a(t.TH,{children:"Amount"}),a(t.TH,{children:"Validity Days"}),a(t.TH,{children:"Validity Months"}),a(t.TH,{children:"Active"}),a(t.TH,{children:"Date"}),a(t.TH,{children:"Actions"})]})}),a(t.Body,{children:c&&c.map((n,h)=>r(t.Row,{children:[a(t.TH,{children:n.id}),a(t.TH,{children:n.plan_name}),a(t.TH,{children:n.plan_amount}),a(t.TH,{children:n.plan_validity_days}),a(t.TH,{children:n.plan_validity_months}),a(t.TH,{children:n.is_active?a("span",{className:"cursor-pointer badge badge-success",onClick:()=>x(n,!1),children:"Active"}):a("span",{className:"cursor-pointer badge badge-danger",onClick:()=>x(n,!0),children:"In Active"})}),a(t.TH,{children:new Date(n.created_at).toLocaleDateString()}),a(t.TH,{children:a("i",{className:"feather icon-edit cursor-pointer",onClick:()=>T(n)})})]},n.id))}),a(t.Footer,{children:r("tr",{children:[a("td",{colSpan:"2"}),a("th",{}),a("td",{colSpan:"5"})]})})]})}),a(j,{editValue:l,setEditValue:f,modalObj:o(s({},e),{onSubmit:b})})]})};export{V as default};
